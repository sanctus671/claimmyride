(self.webpackChunkclaimmyride=self.webpackChunkclaimmyride||[]).push([[475],{475:function(e,t,i){"use strict";i.r(t),i.d(t,{AddVehiclePageModule:function(){return m}});var n=i(1116),o=i(1462),r=i(8809),l=i(578),c=i(5803),a=i(2827),g=i(6282),h=i(9899),u=i(303);function s(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"ion-item"),c.TgZ(2,"ion-label",6),c._uU(3,"Vehicle Make"),c.qZA(),c.TgZ(4,"ion-input",7),c.NdJ("ngModelChange",function(e){return c.CHM(i),c.oxw().vehicle.make=e}),c.qZA(),c.qZA(),c.TgZ(5,"ion-item"),c.TgZ(6,"ion-label",6),c._uU(7,"Vehicle Model"),c.qZA(),c.TgZ(8,"ion-input",7),c.NdJ("ngModelChange",function(e){return c.CHM(i),c.oxw().vehicle.model=e}),c.qZA(),c.qZA(),c.TgZ(9,"ion-item"),c.TgZ(10,"ion-label",6),c._uU(11,"Vehicle Year"),c.qZA(),c.TgZ(12,"ion-input",7),c.NdJ("ngModelChange",function(e){return c.CHM(i),c.oxw().vehicle.year=e}),c.qZA(),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(4),c.Q6J("ngModel",n.vehicle.make),c.xp6(4),c.Q6J("ngModel",n.vehicle.model),c.xp6(4),c.Q6J("ngModel",n.vehicle.year)}}function p(e,t){if(1&e&&(c.TgZ(0,"ion-select-option",22),c._uU(1),c.qZA()),2&e){var i=t.$implicit;c.Q6J("value",i.id),c.xp6(1),c.Oqu(i.name)}}function _(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"ion-item"),c.TgZ(2,"ion-label",6),c._uU(3,"Vehicle Type Name"),c.qZA(),c.TgZ(4,"ion-input",7),c.NdJ("ngModelChange",function(e){return c.CHM(i),c.oxw().vehicle.vehicle_type_name=e}),c.qZA(),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(4),c.Q6J("ngModel",n.vehicle.vehicle_type_name)}}function d(e,t){if(1&e&&(c.TgZ(0,"p",23),c._uU(1),c.qZA()),2&e){var i=c.oxw();c.xp6(1),c.Oqu(i.vehicle.error)}}function v(e,t){1&e&&c._UZ(0,"ion-spinner")}var Z=[{path:"",component:function(){function e(e,t,i,n,o,r,l){var c=this;this.driverService=e,this.vehicleService=t,this.navCtrl=i,this.alertCtrl=n,this.activatedRoute=o,this.iab=r,this.authenticationService=l,this.vehicle={km_tax_rate1:.79,km_tax_rate2:.27},this.vehicleService.getVehicleTypes().then(function(e){c.vehicleTypes=e});var a=parseInt(this.activatedRoute.snapshot.params.driverId);this.vehicle.driver_id=a,console.log(this.vehicle),this.tax={tier_one_petrol:.79,tier_one_hybrid:.79,tier_one_electric:.79,tier_two_petrol:.27,tier_two_hybrid:.16,tier_two_electric:.09},this.user={},this.authenticationService.retreiveUserData().then(function(e){c.user=e,c.user.tax&&(c.tax=JSON.parse(c.user.tax),c.vehicle.km_tax_rate1=c.tax.tier_one_petrol,c.vehicle.km_tax_rate2=c.tax.tier_two_petrol)})}return e.prototype.ngOnInit=function(){},e.prototype.openLink=function(e){this.iab.create(e,"_system")},e.prototype.lookupRegistration=function(){this.vehicle.lookupCompleted=!0,this.vehicle.make="Test",this.vehicle.model="Test",this.vehicle.year="1234",this.vehicleService.getVehicleDetails(this.vehicle.registration).then(function(e){console.log(e)}).catch(function(e){console.log(e)})},e.prototype.updateTaxRates=function(){"petrol"===this.vehicle.fuel_type?(this.vehicle.km_tax_rate1=this.tax.tier_one_petrol,this.vehicle.km_tax_rate2=this.tax.tier_two_petrol):"hybrid"===this.vehicle.fuel_type?(this.vehicle.km_tax_rate1=this.tax.tier_one_hybrid,this.vehicle.km_tax_rate2=this.tax.tier_two_hybrid):"electric"===this.vehicle.fuel_type&&(this.vehicle.km_tax_rate1=this.tax.tier_one_electric,this.vehicle.km_tax_rate2=this.tax.tier_two_electric)},e.prototype.create=function(){var e=this;this.vehicle.loading=!0,this.vehicleService.createVehicle(this.vehicle).then(function(){e.vehicle.loading=!1,e.driverService.setDriversUpdated(),e.navCtrl.back()}).catch(function(){e.vehicle.loading=!1,e.alertCtrl.create({header:"Error",message:"There was an error while creating your vehicle. Please try again.",buttons:[{text:"Dismiss",role:"cancel",handler:function(e){}}]}).then(function(e){e.present()})})},e.\u0275fac=function(t){return new(t||e)(c.Y36(a.F),c.Y36(g.f),c.Y36(r.SH),c.Y36(r.Br),c.Y36(l.gz),c.Y36(h.i),c.Y36(u.$))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-add-vehicle"]],decls:57,vars:13,consts:[["color","light"],["slot","start"],["defaultHref","/tabs/track","color","primary"],["color","primary"],[1,"signup"],[1,"signup__form"],["position","floating"],["clearInput","","type","text",3,"ngModel","ngModelChange"],["clearInput","","type","text",3,"ngModel","ngModelChange","ionBlur"],[4,"ngIf"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["value","create"],[3,"ngModel","ngModelChange","ionChange"],["value","petrol"],["value","hybrid"],["value","electric"],[1,"input-sub-text"],[3,"click"],["class","signup__form__error",4,"ngIf"],[1,"signup-footer"],["color","primary","expand","full","shape","round",1,"signup-footer__button",3,"disabled","click"],[3,"value"],[1,"signup__form__error"]],template:function(e,t){1&e&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar",0),c.TgZ(2,"ion-buttons",1),c._UZ(3,"ion-back-button",2),c.qZA(),c.TgZ(4,"ion-title",3),c._uU(5,"Add Vehicle"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"ion-content",4),c.TgZ(7,"ion-list",5),c.TgZ(8,"ion-item"),c.TgZ(9,"ion-label",6),c._uU(10,"Vehicle Name"),c.qZA(),c.TgZ(11,"ion-input",7),c.NdJ("ngModelChange",function(e){return t.vehicle.name=e}),c.qZA(),c.qZA(),c.TgZ(12,"ion-item"),c.TgZ(13,"ion-label",6),c._uU(14,"Vehicle Registration"),c.qZA(),c.TgZ(15,"ion-input",8),c.NdJ("ngModelChange",function(e){return t.vehicle.registration=e})("ionBlur",function(){return t.lookupRegistration()}),c.qZA(),c.qZA(),c.YNc(16,s,13,3,"div",9),c.TgZ(17,"ion-item"),c.TgZ(18,"ion-label",6),c._uU(19,"Vehicle Odometer Reading"),c.qZA(),c.TgZ(20,"ion-input",7),c.NdJ("ngModelChange",function(e){return t.vehicle.odometer=e}),c.qZA(),c.qZA(),c.TgZ(21,"ion-item"),c.TgZ(22,"ion-label",6),c._uU(23,"Usage Type"),c.qZA(),c.TgZ(24,"ion-select",10),c.NdJ("ngModelChange",function(e){return t.vehicle.vehicle_type_id=e}),c.YNc(25,p,2,2,"ion-select-option",11),c.TgZ(26,"ion-select-option",12),c._uU(27,"Add Vehicle Type"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(28,"ion-item"),c.TgZ(29,"ion-label",6),c._uU(30,"Fuel Type"),c.qZA(),c.TgZ(31,"ion-select",13),c.NdJ("ngModelChange",function(e){return t.vehicle.fuel_type=e})("ionChange",function(){return t.updateTaxRates()}),c.TgZ(32,"ion-select-option",14),c._uU(33,"Petrol or diesel"),c.qZA(),c.TgZ(34,"ion-select-option",15),c._uU(35,"Petrol Hybrid"),c.qZA(),c.TgZ(36,"ion-select-option",16),c._uU(37,"Electric"),c.qZA(),c.qZA(),c.qZA(),c.YNc(38,_,5,1,"div",9),c.TgZ(39,"ion-item"),c.TgZ(40,"ion-label",6),c._uU(41,"Teir 1 Tax Rate ($)"),c.qZA(),c.TgZ(42,"ion-input",7),c.NdJ("ngModelChange",function(e){return t.vehicle.km_tax_rate1=e}),c.qZA(),c.TgZ(43,"p",17),c._uU(44,"To learn more about vehicle tax rates and what you can claim, visit the IRD website "),c.TgZ(45,"a",18),c.NdJ("click",function(){return t.openLink("https://www.ird.govt.nz/income-tax/income-tax-for-businesses-and-organisations/types-of-business-expenses/claiming-vehicle-expenses")}),c._uU(46,"here"),c.qZA(),c._uU(47,"."),c.qZA(),c.qZA(),c.TgZ(48,"ion-item"),c.TgZ(49,"ion-label",6),c._uU(50,"Teir 2 Tax Rate ($)"),c.qZA(),c.TgZ(51,"ion-input",7),c.NdJ("ngModelChange",function(e){return t.vehicle.km_tax_rate2=e}),c.qZA(),c.qZA(),c.YNc(52,d,2,1,"p",19),c.qZA(),c.qZA(),c.TgZ(53,"ion-footer",20),c.TgZ(54,"ion-button",21),c.NdJ("click",function(){return t.create()}),c._uU(55," Add Vehicle "),c.YNc(56,v,1,0,"ion-spinner",9),c.qZA(),c.qZA()),2&e&&(c.xp6(11),c.Q6J("ngModel",t.vehicle.name),c.xp6(4),c.Q6J("ngModel",t.vehicle.registration),c.xp6(1),c.Q6J("ngIf",t.vehicle.registration&&t.vehicle.lookupCompleted),c.xp6(4),c.Q6J("ngModel",t.vehicle.odometer),c.xp6(4),c.Q6J("ngModel",t.vehicle.vehicle_type_id),c.xp6(1),c.Q6J("ngForOf",t.vehicleTypes),c.xp6(6),c.Q6J("ngModel",t.vehicle.fuel_type),c.xp6(7),c.Q6J("ngIf","create"===t.vehicle.vehicle_type_id),c.xp6(4),c.Q6J("ngModel",t.vehicle.km_tax_rate1),c.xp6(9),c.Q6J("ngModel",t.vehicle.km_tax_rate2),c.xp6(1),c.Q6J("ngIf",t.vehicle.error),c.xp6(2),c.Q6J("disabled",t.vehicle.loading),c.xp6(2),c.Q6J("ngIf",t.vehicle.loading))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.wd,r.W2,r.q_,r.Ie,r.Q$,r.pK,r.j9,o.JJ,o.On,n.O5,r.t9,r.QI,n.sg,r.n0,r.fr,r.YG,r.PQ],styles:[".signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__error[_ngcontent-%COMP%]{color:red;font-size:12px;line-height:16px;text-align:Center}.signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__login[_ngcontent-%COMP%]{margin-top:40px;text-align:Center}.signup[_ngcontent-%COMP%]   .input-sub-text[_ngcontent-%COMP%]{font-size:12px;margin:0 0 10px}.signup-footer[_ngcontent-%COMP%]{background-color:#fff}.signup-footer[_ngcontent-%COMP%]:before{display:none}.signup-footer[_ngcontent-%COMP%]   .signup-footer__button[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px;margin-left:5px}"]}),e}()}],f=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[l.Bz.forChild(Z)],l.Bz]}),e}(),m=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[n.ez,o.u5,r.Pc,f]]}),e}()}}]);