(self.webpackChunkclaimmyride=self.webpackChunkclaimmyride||[]).push([[475],{475:function(e,i,t){"use strict";t.r(i),t.d(i,{AddVehiclePageModule:function(){return T}});var n=t(1116),o=t(1462),r=t(8809),c=t(578),l=t(5803),a=t(2827),h=t(6282),g=t(9899),s=t(303);function u(e,i){1&e&&l._UZ(0,"ion-spinner")}function p(e,i){1&e&&(l.TgZ(0,"p",18),l._uU(1,"Success! Your vehicle was found and the details have been prepopulated below."),l.qZA())}function _(e,i){1&e&&(l.TgZ(0,"p",18),l._uU(1,"Your vehicle was not found. Please enter your vehicle details below."),l.qZA())}function d(e,i){if(1&e){var t=l.EpF();l.TgZ(0,"div"),l.YNc(1,p,2,0,"p",13),l.YNc(2,_,2,0,"p",13),l.TgZ(3,"ion-item"),l.TgZ(4,"ion-label",6),l._uU(5,"Vehicle Make"),l.qZA(),l.TgZ(6,"ion-input",7),l.NdJ("ngModelChange",function(e){return l.CHM(t),l.oxw().vehicle.make=e}),l.qZA(),l.qZA(),l.TgZ(7,"ion-item"),l.TgZ(8,"ion-label",6),l._uU(9,"Vehicle Model"),l.qZA(),l.TgZ(10,"ion-input",7),l.NdJ("ngModelChange",function(e){return l.CHM(t),l.oxw().vehicle.model=e}),l.qZA(),l.qZA(),l.TgZ(11,"ion-item"),l.TgZ(12,"ion-label",6),l._uU(13,"Vehicle Year"),l.qZA(),l.TgZ(14,"ion-input",7),l.NdJ("ngModelChange",function(e){return l.CHM(t),l.oxw().vehicle.year=e}),l.qZA(),l.qZA(),l.TgZ(15,"ion-item"),l.TgZ(16,"ion-label",6),l._uU(17,"Fuel Type"),l.qZA(),l.TgZ(18,"ion-select",14),l.NdJ("ngModelChange",function(e){return l.CHM(t),l.oxw().vehicle.fuel_type=e})("ionChange",function(){return l.CHM(t),l.oxw().updateTaxRates()}),l.TgZ(19,"ion-select-option",15),l._uU(20,"Petrol or Diesel"),l.qZA(),l.TgZ(21,"ion-select-option",16),l._uU(22,"Petrol Hybrid"),l.qZA(),l.TgZ(23,"ion-select-option",17),l._uU(24,"Electric"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(25,"ion-item"),l.TgZ(26,"ion-label",6),l._uU(27,"Vehicle Odometer Reading"),l.qZA(),l.TgZ(28,"ion-input",7),l.NdJ("ngModelChange",function(e){return l.CHM(t),l.oxw().vehicle.odometer=e}),l.qZA(),l.qZA(),l.qZA()}if(2&e){var n=l.oxw();l.xp6(1),l.Q6J("ngIf",n.vehicle.found),l.xp6(1),l.Q6J("ngIf",!n.vehicle.found),l.xp6(4),l.Q6J("ngModel",n.vehicle.make),l.xp6(4),l.Q6J("ngModel",n.vehicle.model),l.xp6(4),l.Q6J("ngModel",n.vehicle.year),l.xp6(4),l.Q6J("ngModel",n.vehicle.fuel_type),l.xp6(10),l.Q6J("ngModel",n.vehicle.odometer)}}function v(e,i){if(1&e&&(l.TgZ(0,"ion-select-option",22),l._uU(1),l.qZA()),2&e){var t=i.$implicit;l.Q6J("value",t.id),l.xp6(1),l.Oqu(t.name)}}function f(e,i){if(1&e){var t=l.EpF();l.TgZ(0,"div"),l.TgZ(1,"ion-item"),l.TgZ(2,"ion-label",6),l._uU(3,"Vehicle Type Name"),l.qZA(),l.TgZ(4,"ion-input",7),l.NdJ("ngModelChange",function(e){return l.CHM(t),l.oxw(2).vehicle.vehicle_type_name=e}),l.qZA(),l.qZA(),l.qZA()}if(2&e){var n=l.oxw(2);l.xp6(4),l.Q6J("ngModel",n.vehicle.vehicle_type_name)}}function Z(e,i){if(1&e){var t=l.EpF();l.TgZ(0,"div"),l.TgZ(1,"ion-item"),l.TgZ(2,"ion-label",6),l._uU(3,"Usage Type"),l.qZA(),l.TgZ(4,"ion-select",19),l.NdJ("ngModelChange",function(e){return l.CHM(t),l.oxw().vehicle.vehicle_type_id=e}),l.YNc(5,v,2,2,"ion-select-option",20),l.TgZ(6,"ion-select-option",21),l._uU(7,"Add Vehicle Type"),l.qZA(),l.qZA(),l.qZA(),l.YNc(8,f,5,1,"div",9),l.qZA()}if(2&e){var n=l.oxw();l.xp6(4),l.Q6J("ngModel",n.vehicle.vehicle_type_id),l.xp6(1),l.Q6J("ngForOf",n.vehicleTypes),l.xp6(3),l.Q6J("ngIf","create"===n.vehicle.vehicle_type_id)}}function x(e,i){if(1&e&&(l.TgZ(0,"p",23),l._uU(1),l.qZA()),2&e){var t=l.oxw();l.xp6(1),l.Oqu(t.vehicle.error)}}function m(e,i){1&e&&l._UZ(0,"ion-spinner")}var C=[{path:"",component:function(){function e(e,i,t,n,o,r,c){var l=this;this.driverService=e,this.vehicleService=i,this.navCtrl=t,this.alertCtrl=n,this.activatedRoute=o,this.iab=r,this.authenticationService=c,this.vehicle={km_tax_rate1:.79,km_tax_rate2:.27},this.vehicleService.getVehicleTypes().then(function(e){l.vehicleTypes=e});var a=parseInt(this.activatedRoute.snapshot.params.driverId);this.vehicle.driver_id=a,this.tax={tier_one_petrol:.79,tier_one_hybrid:.79,tier_one_electric:.79,tier_two_petrol:.27,tier_two_hybrid:.16,tier_two_electric:.09},this.user={},this.authenticationService.retreiveUserData().then(function(e){l.user=e,l.user.tax&&(l.tax=JSON.parse(l.user.tax),l.vehicle.km_tax_rate1=l.tax.tier_one_petrol,l.vehicle.km_tax_rate2=l.tax.tier_two_petrol)})}return e.prototype.ngOnInit=function(){},e.prototype.openLink=function(e){this.iab.create(e,"_system")},e.prototype.lookupRegistration=function(){var e=this;this.vehicle.registration&&(this.vehicle.registrationLoading=!0,this.vehicle.registration=this.vehicle.registration.toUpperCase(),this.vehicleService.getVehicleDetails(this.vehicle.registration).then(function(i){e.vehicle.make=i.make,e.vehicle.model=i.model;var t=(i.fuel_type?i.fuel_type:"").toLowerCase();e.vehicle.fuel_type=t,e.vehicle.year=i.year_of_manufacture,e.updateTaxRates(),e.vehicle.lookupCompleted=!0,e.vehicle.found=!0,e.vehicle.registrationLoading=!1}).catch(function(i){e.vehicle.lookupCompleted=!0,e.vehicle.found=!1,e.vehicle.registrationLoading=!1}))},e.prototype.updateTaxRates=function(){"petrol"===this.vehicle.fuel_type?(this.vehicle.km_tax_rate1=this.tax.tier_one_petrol,this.vehicle.km_tax_rate2=this.tax.tier_two_petrol):"hybrid"===this.vehicle.fuel_type?(this.vehicle.km_tax_rate1=this.tax.tier_one_hybrid,this.vehicle.km_tax_rate2=this.tax.tier_two_hybrid):"electric"===this.vehicle.fuel_type&&(this.vehicle.km_tax_rate1=this.tax.tier_one_electric,this.vehicle.km_tax_rate2=this.tax.tier_two_electric)},e.prototype.create=function(){var e=this;this.vehicle.loading=!0,this.vehicle.name=this.vehicle.make+" "+this.vehicle.registration,this.vehicleService.createVehicle(this.vehicle).then(function(){e.vehicle.loading=!1,e.driverService.setDriversUpdated(),e.navCtrl.back()}).catch(function(){e.vehicle.loading=!1,e.alertCtrl.create({header:"Error",message:"There was an error while creating your vehicle. Please try again.",buttons:[{text:"Dismiss",role:"cancel",handler:function(e){}}]}).then(function(e){e.present()})})},e.\u0275fac=function(i){return new(i||e)(l.Y36(a.F),l.Y36(h.f),l.Y36(r.SH),l.Y36(r.Br),l.Y36(c.gz),l.Y36(g.i),l.Y36(s.$))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-add-vehicle"]],decls:22,vars:8,consts:[["color","light"],["slot","start"],["defaultHref","/tabs/track","color","primary"],["color","primary"],[1,"signup"],[1,"signup__form"],["position","floating"],["clearInput","","type","text",3,"ngModel","ngModelChange"],["color","primary","expand","full","shape","round",1,"find-vehicle",3,"disabled","click"],[4,"ngIf"],["class","signup__form__error",4,"ngIf"],[1,"signup-footer"],["color","primary","expand","full","shape","round",1,"signup-footer__button",3,"disabled","click"],["class","vehicle-result",4,"ngIf"],[3,"ngModel","ngModelChange","ionChange"],["value","petrol"],["value","hybrid"],["value","electric"],[1,"vehicle-result"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["value","create"],[3,"value"],[1,"signup__form__error"]],template:function(e,i){1&e&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar",0),l.TgZ(2,"ion-buttons",1),l._UZ(3,"ion-back-button",2),l.qZA(),l.TgZ(4,"ion-title",3),l._uU(5,"Add Vehicle"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(6,"ion-content",4),l.TgZ(7,"ion-list",5),l.TgZ(8,"ion-item"),l.TgZ(9,"ion-label",6),l._uU(10,"Please enter vehicle registration number"),l.qZA(),l.TgZ(11,"ion-input",7),l.NdJ("ngModelChange",function(e){return i.vehicle.registration=e}),l.qZA(),l.qZA(),l.TgZ(12,"ion-button",8),l.NdJ("click",function(){return i.lookupRegistration()}),l._uU(13," Find Vehicle "),l.YNc(14,u,1,0,"ion-spinner",9),l.qZA(),l.YNc(15,d,29,7,"div",9),l.YNc(16,Z,9,3,"div",9),l.YNc(17,x,2,1,"p",10),l.qZA(),l.qZA(),l.TgZ(18,"ion-footer",11),l.TgZ(19,"ion-button",12),l.NdJ("click",function(){return i.create()}),l._uU(20," Add Vehicle "),l.YNc(21,m,1,0,"ion-spinner",9),l.qZA(),l.qZA()),2&e&&(l.xp6(11),l.Q6J("ngModel",i.vehicle.registration),l.xp6(1),l.Q6J("disabled",i.vehicle.registrationLoading||!i.vehicle.registration),l.xp6(2),l.Q6J("ngIf",i.vehicle.registrationLoading),l.xp6(1),l.Q6J("ngIf",i.vehicle.registration&&i.vehicle.lookupCompleted&&!i.vehicle.registrationLoading),l.xp6(1),l.Q6J("ngIf",!1),l.xp6(1),l.Q6J("ngIf",i.vehicle.error),l.xp6(2),l.Q6J("disabled",i.vehicle.loading||!i.vehicle.make||!i.vehicle.registration),l.xp6(2),l.Q6J("ngIf",i.vehicle.loading))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.wd,r.W2,r.q_,r.Ie,r.Q$,r.pK,r.j9,o.JJ,o.On,r.YG,n.O5,r.fr,r.PQ,r.t9,r.QI,r.n0,n.sg],styles:[".signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .vehicle-result[_ngcontent-%COMP%]{padding:0 15px}.signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .find-vehicle[_ngcontent-%COMP%]{margin-top:20px}.signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .find-vehicle[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px;margin-left:5px}.signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__error[_ngcontent-%COMP%]{color:red;font-size:12px;line-height:16px;text-align:Center}.signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__login[_ngcontent-%COMP%]{margin-top:40px;text-align:Center}.signup[_ngcontent-%COMP%]   .input-sub-text[_ngcontent-%COMP%]{font-size:12px;margin:0 0 10px}.signup-footer[_ngcontent-%COMP%]{background-color:#fff}.signup-footer[_ngcontent-%COMP%]:before{display:none}.signup-footer[_ngcontent-%COMP%]   .signup-footer__button[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px;margin-left:5px}"]}),e}()}],M=function(){function e(){}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[c.Bz.forChild(C)],c.Bz]}),e}(),T=function(){function e(){}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[n.ez,o.u5,r.Pc,M]]}),e}()}}]);