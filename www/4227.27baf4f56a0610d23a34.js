(self.webpackChunkclaimmyride=self.webpackChunkclaimmyride||[]).push([[4227],{4227:function(t,e,n){"use strict";n.r(e),n.d(e,{ManageTripCategoriesPageModule:function(){return d}});var i=n(1116),o=n(1462),r=n(8809),a=n(578),c=n(5803),p=n(2123);function u(t,e){1&t&&c._UZ(0,"ion-icon",12)}function s(t,e){if(1&t){var n=c.EpF();c.TgZ(0,"ion-item",10),c.NdJ("click",function(){var t=c.CHM(n).$implicit;return c.oxw().editCategory(t)}),c.TgZ(1,"ion-label"),c._uU(2),c.qZA(),c.YNc(3,u,1,0,"ion-icon",11),c.qZA()}if(2&t){var i=e.$implicit;c.xp6(2),c.Oqu(i.name),c.xp6(1),c.Q6J("ngIf",!i.public)}}var g=[{path:"",component:function(){function t(t,e){this.tripService=t,this.alertCtrl=e,this.categories=[],this.loading=!0,this.getTripCategories()}return t.prototype.ngOnInit=function(){},t.prototype.getTripCategories=function(){var t=this;this.tripService.getTripCategories().then(function(e){t.categories=e,t.loading=!1})},t.prototype.addCategory=function(){var t=this;this.alertCtrl.create({header:"Add Category",inputs:[{name:"category_name",placeholder:"Category Name",type:"text"}],buttons:[{text:"Cancel",role:"cancel",handler:function(t){}},{text:"Add Category",handler:function(e){e&&e.category_name&&t.tripService.createTripCategory({name:e.category_name}).then(function(e){t.getTripCategories()})}}]}).then(function(t){t.present()})},t.prototype.editCategory=function(t){var e=this;t.public||this.alertCtrl.create({header:"Edit Category",inputs:[{name:"category_name",placeholder:"Category Name",type:"text",value:t.name}],buttons:[{text:"Cancel",role:"cancel",handler:function(t){}},{text:"Update",handler:function(n){n&&n.category_name&&(t.name=n.category_name,e.tripService.updateTripCategory(t).then(function(t){e.getTripCategories()}))}},{text:"Delete",handler:function(n){setTimeout(function(){e.deleteCategory(t)},200)}}]}).then(function(t){t.present()})},t.prototype.deleteCategory=function(t){var e=this;this.alertCtrl.create({header:"Delete Category",subHeader:"Are you sure you want to delete this category?",buttons:[{text:"Cancel",role:"cancel",handler:function(t){}},{text:"Yes",handler:function(n){e.tripService.deleteTripCategory(t.id).then(function(){e.getTripCategories()})}}]}).then(function(t){t.present()})},t.\u0275fac=function(e){return new(e||t)(c.Y36(p.a),c.Y36(r.Br))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-manage-trip-categories"]],decls:13,vars:1,consts:[[1,"manage-trip-categories-header"],["color","light"],["slot","start"],["defaultHref","/settings","color","primary"],["color","primary"],[1,"manage-trip-categories"],[3,"click",4,"ngFor","ngForOf"],[1,"manage-trip-categories__add"],["color","light","shape","round","expand","full",3,"click"],["name","add"],[3,"click"],["name","chevron-forward-outline","slot","end","color","primary",4,"ngIf"],["name","chevron-forward-outline","slot","end","color","primary"]],template:function(t,e){1&t&&(c.TgZ(0,"ion-header",0),c.TgZ(1,"ion-toolbar",1),c.TgZ(2,"ion-buttons",2),c._UZ(3,"ion-back-button",3),c.qZA(),c.TgZ(4,"ion-title",4),c._uU(5,"Manage Categories"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"ion-content",5),c.TgZ(7,"ion-list"),c.YNc(8,s,4,2,"ion-item",6),c.qZA(),c.TgZ(9,"div",7),c.TgZ(10,"ion-button",8),c.NdJ("click",function(){return e.addCategory()}),c._UZ(11,"ion-icon",9),c._uU(12," Add Category"),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(8),c.Q6J("ngForOf",e.categories))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.wd,r.W2,r.q_,i.sg,r.YG,r.gu,r.Ie,r.Q$,i.O5],styles:[".manage-trip-categories[_ngcontent-%COMP%]   ion-list.ios[_ngcontent-%COMP%]{margin-top:5px}.manage-trip-categories[_ngcontent-%COMP%]   .manage-trip-categories__add[_ngcontent-%COMP%]{margin-top:10px}.manage-trip-categories[_ngcontent-%COMP%]   .manage-trip-categories__add[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{box-shadow:none;--ion-color-base:#fff4eb!important;--ion-color-base-rgb:#fff4eb!important;--ion-color-contrast:#ff7a00!important;--ion-color-contrast-rgb:#ff7a00!important;--box-shadow:none}"]}),t}()}],f=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[a.Bz.forChild(g)],a.Bz]}),t}(),d=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[i.ez,o.u5,r.Pc,f]]}),t}()},2123:function(t,e,n){"use strict";n.d(e,{a:function(){return p}});var i=n(529),o=n(8512),r=n(5803),a=n(2693),c=n(6578),p=function(){function t(t,e){this.http=t,this.storage=e,this.tripsUpdated=new o.X(!1)}return t.prototype.monitorTrips=function(){return this.tripsUpdated.asObservable()},t.prototype.setTripsUpdated=function(){this.tripsUpdated.next(!0)},t.prototype.getTripCategories=function(){var t=this;return new Promise(function(e,n){t.storage.get("claimmyride_token").then(function(o){o?t.http.get(i.N.apiUrl+"/tripcategories?token="+o).subscribe(function(t){e(t)},function(t){n(t)}):n()})})},t.prototype.createTripCategory=function(t){var e=this;return new Promise(function(n,o){e.storage.get("claimmyride_token").then(function(r){r?e.http.post(i.N.apiUrl+"/tripcategories?token="+r,t).subscribe(function(t){n(t)},function(t){o(t)}):o()})})},t.prototype.updateTripCategory=function(t){var e=this;return new Promise(function(n,o){e.storage.get("claimmyride_token").then(function(r){r?e.http.put(i.N.apiUrl+"/tripcategories/"+t.id+"?token="+r,t).subscribe(function(t){n(t)},function(t){o(t)}):o()})})},t.prototype.deleteTripCategory=function(t){var e=this;return new Promise(function(n,o){e.storage.get("claimmyride_token").then(function(r){r?e.http.delete(i.N.apiUrl+"/tripcategories/"+t+"?token="+r).subscribe(function(t){n(t)},function(t){o(t)}):o()})})},t.prototype.getTrips=function(){var t=this;return new Promise(function(e,n){t.storage.get("claimmyride_token").then(function(o){o?t.http.get(i.N.apiUrl+"/trips?token="+o).subscribe(function(t){e(t)},function(t){n(t)}):n()})})},t.prototype.generateCSV=function(t){var e=this;return new Promise(function(n,o){e.storage.get("claimmyride_token").then(function(r){r?e.http.get(i.N.apiUrl+"/exportcsv?token="+r+"&vehicle_id="+t.vehicle_id+"&start_date="+t.start_date+"&end_date="+t.end_date+"&trip_category_id="+t.trip_category_id).subscribe(function(t){n(t)},function(t){o(t)}):o()})})},t.prototype.generatePDF=function(t){var e=this;return new Promise(function(n,o){e.storage.get("claimmyride_token").then(function(r){r?e.http.get(i.N.apiUrl+"/exportpdf?token="+r+"&vehicle_id="+t.vehicle_id+"&start_date="+t.start_date+"&end_date="+t.end_date+"&trip_category_id="+t.trip_category_id).subscribe(function(t){n(t)},function(t){o(t)}):o()})})},t.prototype.getTrip=function(t){var e=this;return new Promise(function(n,o){e.storage.get("claimmyride_token").then(function(r){r?e.http.get(i.N.apiUrl+"/trips/"+t+"?token="+r).subscribe(function(t){n(t)},function(t){o(t)}):o()})})},t.prototype.createTrip=function(t){var e=this;return new Promise(function(n,o){e.storage.get("claimmyride_token").then(function(r){r?e.http.post(i.N.apiUrl+"/trips?token="+r,t).subscribe(function(t){n(t)},function(t){o(t)}):o()})})},t.prototype.updateTrip=function(t){var e=this;return new Promise(function(n,o){e.storage.get("claimmyride_token").then(function(r){r?e.http.put(i.N.apiUrl+"/trips/"+t.id+"?token="+r,t).subscribe(function(t){n(t)},function(t){o(t)}):o()})})},t.prototype.deleteTrip=function(t){var e=this;return new Promise(function(n,o){e.storage.get("claimmyride_token").then(function(r){r?e.http.delete(i.N.apiUrl+"/trips/"+t+"?token="+r).subscribe(function(t){n(t)},function(t){o(t)}):o()})})},t.\u0275fac=function(e){return new(e||t)(r.LFG(a.eN),r.LFG(c.K))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}]);