(self.webpackChunkclaimmyride=self.webpackChunkclaimmyride||[]).push([[8220],{8220:function(t,i,n){"use strict";n.r(i),n.d(i,{HistoryPageModule:function(){return u}});var o=n(1116),_=n(1462),r=n(8809),e=n(578),s=n(4762),a=n(9609),c=n(5803),p=n(2123);function l(t,i){1&t&&(c.TgZ(0,"div",11),c._UZ(1,"ion-spinner",2),c.qZA())}var g=function(t){return[t]};function h(t,i){if(1&t&&(c.TgZ(0,"div",15),c.TgZ(1,"div",16),c.TgZ(2,"h3"),c._uU(3),c.qZA(),c.TgZ(4,"p"),c._uU(5),c.qZA(),c.TgZ(6,"div",17),c._uU(7),c.ALo(8,"number"),c.qZA(),c.qZA(),c.TgZ(9,"div",18),c.TgZ(10,"div",19),c.TgZ(11,"div",20),c._uU(12),c.qZA(),c.TgZ(13,"div",21),c._uU(14),c.qZA(),c.qZA(),c.TgZ(15,"div",22),c.TgZ(16,"div",20),c._uU(17),c.qZA(),c.TgZ(18,"div",21),c._uU(19),c.qZA(),c.qZA(),c.TgZ(20,"div",23),c._uU(21),c.ALo(22,"number"),c.TgZ(23,"span"),c._uU(24),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t){var n=i.$implicit,o=c.oxw(2);c.Q6J("routerLink",c.VKq(16,g,"/trip/"+n.id)),c.xp6(3),c.Oqu(o.formatDate(n.start_date)),c.xp6(2),c.hij("Trip #",n.count,""),c.xp6(2),c.hij(" $",c.xi3(8,10,n.reimbursement,"1.0-2")," "),c.xp6(5),c.Oqu(o.formatTime(n.start_date)),c.xp6(2),c.Oqu(n.start_address?n.start_address:"Latitude: "+n.start_latitude+", Longitude: "+n.start_longitude),c.xp6(3),c.Oqu(o.formatTime(n.end_date)),c.xp6(2),c.Oqu(n.end_address?n.end_address:"Latitude: "+n.end_latitude+", Longitude: "+n.end_longitude),c.xp6(2),c.hij(" ",c.xi3(22,13,n.total_distance,"1.2-2")," "),c.xp6(3),c.Oqu(n.units?n.units:"km")}}function d(t,i){if(1&t&&(c.TgZ(0,"div",12),c.TgZ(1,"div",13),c.TgZ(2,"span"),c._uU(3),c.qZA(),c.qZA(),c.YNc(4,h,25,18,"div",14),c.qZA()),2&t){var n=i.$implicit,o=c.oxw();c.xp6(3),c.Oqu(o.formatMonth(n)),c.xp6(1),c.Q6J("ngForOf",o.trips[n])}}var y=[{path:"",component:function(){function t(t,i){var n=this;this.tripService=t,this.ngZone=i,this.tripDates=[],this.displayedTripDates=[],this.trips={},this.loading=!0,this.datePickerOptions={buttons:[{text:"Clear",handler:function(){n.displayedTripDates=n.tripDates,n.selectedDate=null}},{text:"Cancel",handler:function(){}},{text:"Set",handler:function(t){n.selectedDate=t.month.text+", "+t.year.text;var i=""+t.month.value;1===i.length&&(i="0"+i),n.displayedTripDates=[t.year.value+"-"+i+"-01"]}}]},this.tripService.monitorTrips().subscribe(function(t){t&&n.getTrips()})}return t.prototype.ionViewDidEnter=function(){this.getTrips()},t.prototype.ngOnInit=function(){},t.prototype.getTrips=function(){var t=this;this.tripService.getTrips().then(function(i){t.ngZone.run(function(){var n,o;t.trips={},t.tripDates=[];var _=i.length;try{for(var r=(0,s.XA)(i),e=r.next();!e.done;e=r.next()){var c=e.value;c.count=_;var p=a(c.start_date).format("YYYY-MM-01");t.trips[p]?t.trips[p].push(c):(t.trips[p]=[c],t.tripDates.push(p)),_-=1}}catch(l){n={error:l}}finally{try{e&&!e.done&&(o=r.return)&&o.call(r)}finally{if(n)throw n.error}}t.displayedTripDates=t.tripDates,t.loading=!1})})},t.prototype.formatDate=function(t){return a(t).format("dddd, Do MMMM")},t.prototype.formatTime=function(t){return a(t).format("h:mma")},t.prototype.formatMonth=function(t){return a(t).format("MMMM YYYY")},t.\u0275fac=function(i){return new(i||t)(c.Y36(p.a),c.Y36(c.R0b))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-history"]],decls:12,vars:4,consts:[[1,"trip-history-header"],["color","light"],["color","primary"],["slot","end",1,"trip-history-header__date"],["color","primary",3,"click"],["pickerFormat","MMMM YYYY","displayFormat","MMM YYYY",3,"ngModel","pickerOptions","ngModelChange"],["picker",""],["name","date"],[1,"history"],["class","history__loading",4,"ngIf"],["class","history__list",4,"ngFor","ngForOf"],[1,"history__loading"],[1,"history__list"],[1,"history__list__header"],["class","history__list__trip","routerDirection","forward",3,"routerLink",4,"ngFor","ngForOf"],["routerDirection","forward",1,"history__list__trip",3,"routerLink"],[1,"history__list__trip__header"],[1,"history__list__trip__header__price"],[1,"history__list__trip__locations"],[1,"history__list__trip__locations__location","history__list__trip__locations__location--start"],[1,"history__list__trip__locations__location__time"],[1,"history__list__trip__locations__location__address"],[1,"history__list__trip__locations__location","history__list__trip__locations__location--end"],[1,"history__list__trip__locations__distance"]],template:function(t,i){if(1&t){var n=c.EpF();c.TgZ(0,"ion-header",0),c.TgZ(1,"ion-toolbar",1),c.TgZ(2,"ion-title",2),c._uU(3,"Trip History"),c.qZA(),c.TgZ(4,"ion-buttons",3),c.TgZ(5,"ion-button",4),c.NdJ("click",function(){return c.CHM(n),c.MAs(7).open()}),c.TgZ(6,"ion-datetime",5,6),c.NdJ("ngModelChange",function(t){return i.selectedDate=t}),c.qZA(),c._UZ(8,"ion-icon",7),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(9,"ion-content",8),c.YNc(10,l,2,0,"div",9),c.YNc(11,d,5,2,"div",10),c.qZA()}2&t&&(c.xp6(6),c.Q6J("ngModel",i.selectedDate)("pickerOptions",i.datePickerOptions),c.xp6(4),c.Q6J("ngIf",i.loading),c.xp6(1),c.Q6J("ngForOf",i.displayedTripDates))},directives:[r.Gu,r.sr,r.wd,r.Sm,r.YG,r.x4,r.QI,_.JJ,_.On,r.gu,r.W2,o.O5,o.sg,r.PQ,r.YI,e.rH],pipes:[o.JJ],styles:['.trip-history-header[_ngcontent-%COMP%]{background-color:#f6f7eb}.trip-history-header[_ngcontent-%COMP%]   .trip-history-header__date[_ngcontent-%COMP%]   ion-datetime[_ngcontent-%COMP%]{pointer-events:none;line-height:18px;margin-right:10px}.history[_ngcontent-%COMP%]{--padding-top:20px;--background:#f6f7eb}.history[_ngcontent-%COMP%]   .history__loading[_ngcontent-%COMP%]{text-align:center;margin-top:40px;margin-bottom:60px}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]{padding-left:8px;padding-right:8px}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__header[_ngcontent-%COMP%]{font-size:20px;line-height:25px;font-weight:600;letter-spacing:-.02em;color:#23232333;position:relative;padding-bottom:10px;margin-top:0}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:#f6f7eb;padding-left:8px;padding-right:8px;position:relative;z-index:1}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__header[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;top:10px;opacity:.2;border-bottom:2px dashed #232323;width:100%;height:2px}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__trip[_ngcontent-%COMP%]{box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;background-color:#fff;border-radius:16px;padding:16px;margin-bottom:15px}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__trip[_ngcontent-%COMP%]   .history__list__trip__header[_ngcontent-%COMP%]{border-bottom:1px solid #2323231f;position:relative;padding-bottom:13px;margin-bottom:15px}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__trip[_ngcontent-%COMP%]   .history__list__trip__header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-weight:600;font-size:20px;line-height:25px;letter-spacing:-.02em;color:#232323;padding-right:60px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__trip[_ngcontent-%COMP%]   .history__list__trip__header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-weight:500;font-size:16px;line-height:20px;letter-spacing:-.02em;color:#23232366}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__trip[_ngcontent-%COMP%]   .history__list__trip__header[_ngcontent-%COMP%]   .history__list__trip__header__price[_ngcontent-%COMP%]{position:absolute;top:0;right:0;text-align:center;padding:8px;background:#ff7a0014;border-radius:16px;font-weight:600;font-size:18px;line-height:22px;text-align:right;letter-spacing:-.02em;color:#ff7a00}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__trip[_ngcontent-%COMP%]   .history__list__trip__locations[_ngcontent-%COMP%]{position:relative}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__trip[_ngcontent-%COMP%]   .history__list__trip__locations[_ngcontent-%COMP%]   .history__list__trip__locations__location[_ngcontent-%COMP%]{display:flex;padding-right:50px}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__trip[_ngcontent-%COMP%]   .history__list__trip__locations[_ngcontent-%COMP%]   .history__list__trip__locations__location[_ngcontent-%COMP%]   .history__list__trip__locations__location__time[_ngcontent-%COMP%]{color:#23232399;position:relative}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__trip[_ngcontent-%COMP%]   .history__list__trip__locations[_ngcontent-%COMP%]   .history__list__trip__locations__location[_ngcontent-%COMP%]   .history__list__trip__locations__location__address[_ngcontent-%COMP%]{color:#23232399}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__trip[_ngcontent-%COMP%]   .history__list__trip__locations[_ngcontent-%COMP%]   .history__list__trip__locations__location.history__list__trip__locations__location--start[_ngcontent-%COMP%]   .history__list__trip__locations__location__time[_ngcontent-%COMP%]:after{content:"A";color:#ff7a00;background:#ff7a001f;padding:0 5px;border-radius:3px;margin-right:5px;margin-left:5px}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__trip[_ngcontent-%COMP%]   .history__list__trip__locations[_ngcontent-%COMP%]   .history__list__trip__locations__location.history__list__trip__locations__location--start[_ngcontent-%COMP%]   .history__list__trip__locations__location__time[_ngcontent-%COMP%]:before{content:"";position:absolute;right:15px;top:30px;border-right:1px solid #2323231f;height:30px;width:1px}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__trip[_ngcontent-%COMP%]   .history__list__trip__locations[_ngcontent-%COMP%]   .history__list__trip__locations__location.history__list__trip__locations__location--end[_ngcontent-%COMP%]{margin-top:15px}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__trip[_ngcontent-%COMP%]   .history__list__trip__locations[_ngcontent-%COMP%]   .history__list__trip__locations__location.history__list__trip__locations__location--end[_ngcontent-%COMP%]   .history__list__trip__locations__location__time[_ngcontent-%COMP%]:after{content:"B";color:#ff7a00;background:#ff7a001f;padding:0 5px;border-radius:3px;margin-right:5px;margin-left:5px}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__trip[_ngcontent-%COMP%]   .history__list__trip__locations[_ngcontent-%COMP%]   .history__list__trip__locations__distance[_ngcontent-%COMP%]{background:#2323230a;border-radius:16px;font-weight:600;font-size:18px;line-height:22px;letter-spacing:-.02em;color:#232323;position:absolute;top:0;right:0;text-align:center;padding:8px}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__trip[_ngcontent-%COMP%]   .history__list__trip__locations[_ngcontent-%COMP%]   .history__list__trip__locations__distance[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;font-size:14px;line-height:17px;letter-spacing:-.02em;color:#232323;opacity:.4;display:block}']}),t}()}],M=function(){function t(){}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[e.Bz.forChild(y)],e.Bz]}),t}(),u=function(){function t(){}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[o.ez,_.u5,r.Pc,M]]}),t}()}}]);