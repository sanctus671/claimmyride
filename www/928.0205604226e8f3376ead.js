(self.webpackChunkclaimmyride=self.webpackChunkclaimmyride||[]).push([[928],{928:function(t,e,r){"use strict";r.r(e),r.d(e,{TrackPageModule:function(){return H}});var n=r(574),i=r(1116),o=r(2693),c=r(1462),a=r(8809),s=r(578),d=r(4762),l=r(878),h=r(9996),p=r(7727),g=r(5803),_=function(){function t(t,e){this.popoverController=t,this.navParams=e;var r=this.navParams.get("driver");this.driver=r||{}}return t.prototype.ngOnInit=function(){},t.prototype.close=function(){this.popoverController.dismiss()},t.prototype.start=function(t){this.popoverController.dismiss({trackingType:t})},t.\u0275fac=function(e){return new(e||t)(g.Y36(a.Dh),g.Y36(a.X1))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-start-tracking"]],decls:21,vars:2,consts:[[1,"start-tracking"],[1,"start-tracking__close",3,"click"],[1,"start-tracking__driver"],[1,"start-tracking__option",3,"click"],["name","navigate"],["name","pencil"]],template:function(t,e){1&t&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.NdJ("click",function(){return e.close()}),g.qZA(),g.TgZ(2,"h1"),g._uU(3,"Start Trip"),g.qZA(),g.TgZ(4,"div",2),g.TgZ(5,"h6"),g._uU(6,"Driver"),g.qZA(),g.TgZ(7,"h5"),g._uU(8),g.qZA(),g.qZA(),g.TgZ(9,"div",3),g.NdJ("click",function(){return e.start("automatic")}),g.TgZ(10,"h4"),g._UZ(11,"ion-icon",4),g._uU(12," Track now"),g.qZA(),g.TgZ(13,"p"),g._uU(14,"Track your trip in real time using GPS."),g.qZA(),g.qZA(),g.TgZ(15,"div",3),g.NdJ("click",function(){return e.start("manual")}),g.TgZ(16,"h4"),g._UZ(17,"ion-icon",5),g._uU(18," Create a manual trip"),g.qZA(),g.TgZ(19,"p"),g._uU(20,"Add your trip by entering the start and end addresses."),g.qZA(),g.qZA(),g.qZA()),2&t&&(g.xp6(8),g.AsE("",e.driver.first_name," ",e.driver.last_name,""))},directives:[a.gu],styles:[".start-tracking[_ngcontent-%COMP%]{padding:12px 20px 40px}.start-tracking[_ngcontent-%COMP%]   .start-tracking__close[_ngcontent-%COMP%]{width:66px;height:5px;left:calc(50% - 33px);top:12px;position:absolute;background:#2323231f;border-radius:100px}.start-tracking[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:600;font-size:28px;color:#232323;line-height:32px;margin:30px 0 0}.start-tracking[_ngcontent-%COMP%]   .start-tracking__driver[_ngcontent-%COMP%]{margin-top:24px;margin-bottom:24px}.start-tracking[_ngcontent-%COMP%]   .start-tracking__driver[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:0;font-weight:600;font-size:14px;line-height:17px;letter-spacing:-.02em;color:#232323;opacity:.4}.start-tracking[_ngcontent-%COMP%]   .start-tracking__driver[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:600;font-size:16px;line-height:24px;color:#232323;margin:0}.start-tracking[_ngcontent-%COMP%]   .start-tracking__option[_ngcontent-%COMP%]{border:2px solid #2323231f;box-sizing:border-box;border-radius:16px;padding:16px;margin-bottom:10px;cursor:pointer}.start-tracking[_ngcontent-%COMP%]   .start-tracking__option[_ngcontent-%COMP%]:focus, .start-tracking[_ngcontent-%COMP%]   .start-tracking__option[_ngcontent-%COMP%]:hover{border:2px solid #ff7a00}.start-tracking[_ngcontent-%COMP%]   .start-tracking__option[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:600;font-size:16px;line-height:24px;color:#232323;margin:0}.start-tracking[_ngcontent-%COMP%]   .start-tracking__option[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{vertical-align:middle}.start-tracking[_ngcontent-%COMP%]   .start-tracking__option[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;line-height:20px;color:#23232380}"]}),t}(),u=r(9609),v=r(2977),f=r(6986),k=r(2827),m=r(6282),x=r(2123),C=r(303);function O(t,e){1&t&&(g.TgZ(0,"p",13),g._uU(1,"Start here"),g.qZA())}function M(t,e){1&t&&(g.TgZ(0,"p",13),g._uU(1,"Selected driver"),g.qZA())}function P(t,e){1&t&&(g.TgZ(0,"span"),g._uU(1,"Select Driver"),g.qZA())}function T(t,e){if(1&t&&(g.TgZ(0,"span"),g._uU(1),g.qZA()),2&t){var r=g.oxw();g.xp6(1),g.AsE("",r.selectedDriver.first_name," ",r.selectedDriver.last_name,"")}}function Z(t,e){if(1&t&&(g.TgZ(0,"div",14),g.TgZ(1,"h3"),g._uU(2),g.ALo(3,"number"),g.qZA(),g.TgZ(4,"p"),g._uU(5,"Current trip expense"),g.qZA(),g.qZA()),2&t){var r=g.oxw();g.xp6(2),g.hij("$",g.xi3(3,1,r.totalTrackedExpenses,"1.2-2"),"")}}function b(t,e){if(1&t&&(g.TgZ(0,"ion-buttons",15),g.TgZ(1,"ion-button",2),g._UZ(2,"ion-icon",16),g.qZA(),g.TgZ(3,"div",17),g.TgZ(4,"span"),g._uU(5),g.ALo(6,"number"),g.qZA(),g.TgZ(7,"h6"),g._uU(8,"Total FY"),g.qZA(),g.qZA(),g.qZA()),2&t){var r=g.oxw();g.xp6(5),g.hij("$",g.xi3(6,1,r.selectedDriver.claimed,"1.2-2"),"")}}var D=function(t){return{"track-header__vehicles__vehicle--selected":t}};function y(t,e){if(1&t){var r=g.EpF();g.TgZ(0,"div",22),g.NdJ("click",function(){var t=g.CHM(r).$implicit;return g.oxw(2).selectVehicle(t)}),g._UZ(1,"ion-icon",23),g._uU(2),g.qZA()}if(2&t){var n=e.$implicit,i=g.oxw(2);g.Q6J("ngClass",g.VKq(2,D,i.selectedVehicle&&n.name===i.selectedVehicle.name)),g.xp6(2),g.hij(" ",n.name," ")}}function w(t,e){if(1&t){var r=g.EpF();g.TgZ(0,"div",18),g.YNc(1,y,3,4,"div",19),g.TgZ(2,"div",20),g.NdJ("click",function(){return g.CHM(r),g.oxw().addVehicle()}),g._UZ(3,"ion-icon",21),g._uU(4," Add vehicle "),g.qZA(),g.qZA()}if(2&t){var n=g.oxw();g.xp6(1),g.Q6J("ngForOf",n.vehicles)}}var A=function(t){return{"track-header__drivers__driver--last":t}};function q(t,e){if(1&t){var r=g.EpF();g.TgZ(0,"div",28),g.NdJ("click",function(){var t=g.CHM(r).$implicit;return g.oxw(2).selectDriver(t)}),g.TgZ(1,"h3"),g._uU(2),g.qZA(),g.TgZ(3,"span"),g._uU(4),g.ALo(5,"number"),g.qZA(),g.qZA()}if(2&t){var n=e.$implicit;g.Q6J("ngClass",g.VKq(7,A,e.last)),g.xp6(2),g.AsE("",n.first_name," ",n.last_name,""),g.xp6(2),g.hij("$",g.xi3(5,4,n.claimed,"1.2-2"),"")}}var Y=function(t){return{"track-header__drivers--driver-selected":t}},S=function(){return["/add-driver"]};function J(t,e){if(1&t&&(g.TgZ(0,"div",24),g.YNc(1,q,6,9,"div",25),g.TgZ(2,"div",26),g.TgZ(3,"ion-button",27),g._UZ(4,"ion-icon",21),g._uU(5," Add Driver"),g.qZA(),g.qZA(),g.qZA()),2&t){var r=g.oxw();g.Q6J("ngClass",g.VKq(3,Y,r.selectedDriver)),g.xp6(1),g.Q6J("ngForOf",r.drivers),g.xp6(2),g.Q6J("routerLink",g.DdM(5,S))}}function U(t,e){if(1&t&&g._UZ(0,"map-polyline",32),2&t){var r=e.$implicit,n=g.oxw(2);g.Q6J("path",r)("options",n.verticesOptions)}}function V(t,e){if(1&t&&(g.TgZ(0,"div"),g.TgZ(1,"google-map",29),g._UZ(2,"map-marker",30),g.YNc(3,U,1,2,"map-polyline",31),g.qZA(),g.qZA()),2&t){var r=g.oxw();g.xp6(1),g.Q6J("options",r.mapOptions)("center",r.mapCenter)("zoom",r.mapZoom),g.xp6(1),g.Q6J("position",r.markerPosition)("options",r.markerOptions),g.xp6(1),g.Q6J("ngForOf",r.linesToDraw)}}function I(t,e){if(1&t){var r=g.EpF();g.TgZ(0,"div",33),g.TgZ(1,"ion-button",34),g.NdJ("click",function(t){return g.CHM(r),g.oxw().startTracking(t)}),g._uU(2,"Start Tracking"),g.qZA(),g.qZA()}}function N(t,e){if(1&t){var r=g.EpF();g.TgZ(0,"div",33),g.TgZ(1,"ion-button",35),g.NdJ("click",function(){return g.CHM(r),g.oxw().stopAutomaticTracking()}),g._uU(2,"Stop Tracking"),g.qZA(),g.qZA()}}var z=function(t){return{"track-header--driver-selected":t}},Q=function(t){return{"track--driver-selected":t}},E=[{path:"",component:function(){function t(t,e,r,n,i,o,c,a,s,g,_,v,f){var k=this;this.popoverController=e,this.geolocation=r,this.nativeGeocoder=n,this.driverService=i,this.vehicleService=o,this.alertCtrl=c,this.tripService=a,this.router=s,this.platform=g,this.ngZone=_,this.authenticationService=v,this.ref=f,this.mapOptions={disableDefaultUI:!0,keyboardShortcuts:!1},this.mapCenter={lat:-41.0804779,lng:172.8719675},this.mapZoom=5,this.markerOrigin={x:11,y:11,equals:function(t){return!!t&&t.x==k.markerOrigin.x&&t.y==k.markerOrigin.y}},this.markerOptions={draggable:!1,icon:{url:"http://159.223.51.166/mapicon.png",anchor:this.markerOrigin}},this.vertices=[],this.linesToDraw=[],this.verticesOptions={strokeColor:"#FF7A00"},this.locationOptions={timeout:1e4,enableHighAccuracy:!0,maximumAge:0},this.nativeGeocoderOptions={useLocale:!0,maxResults:1},this.apiLoaded=t.jsonp("https://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyCc43JNK-d2_-M77NG0hKzjixSer7RzLLY","callback").pipe((0,h.U)(function(){return!0}),(0,p.K)(function(){return(0,l.of)(!1)})),this.properties={showDrivers:!1},this.authenticationService.getUserData().subscribe(function(t){k.user=t}),this.monthlyTripCount=0,this.tripService.getTrips().then(function(t){var e,r,n=u().format("YYYY-MM");try{for(var i=(0,d.XA)(t),o=i.next();!o.done;o=i.next())u(o.value.start_date).format("YYYY-MM")===n&&(k.monthlyTripCount+=1)}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}}),this.drivers=[],this.vehicles=[],this.currentTrip={},this.totalTrackedExpenses=0,this.tax={tier_one_petrol:.79,tier_one_hybrid:.79,tier_one_electric:.79,tier_two_petrol:.27,tier_two_hybrid:.16,tier_two_electric:.09},this.platform.ready().then(function(){k.getCurrentCoordinates(),k.platform.pause.subscribe(function(){k.startedTracking&&k.trackingInterval.unsubscribe()}),k.platform.resume.subscribe(function(){k.startedTracking&&k.geolocation.getCurrentPosition(k.locationOptions).then(function(t){var e={lat:t.coords.latitude,lng:t.coords.longitude},r=k.vertices[k.vertices.length-1];k.markerPosition={lat:t.coords.latitude,lng:t.coords.longitude},k.mapCenter={lat:t.coords.latitude,lng:t.coords.longitude};var n=new google.maps.DirectionsService,i={origin:r,destination:e,travelMode:google.maps.TravelMode.DRIVING};n.route(i,function(t,n){var i,o;if("OK"===n){var c=t.routes[0].legs[0];k.totalTrackedDistance+=_=c.distance.value/1e3;var a=c.steps,s=r;try{for(var l=(0,d.XA)(a),h=l.next();!h.done;h=l.next()){var p=h.value,g={lat:p.end_location.lat(),lng:p.end_location.lng()};k.linesToDraw.push([s,g]),s=g}}catch(u){i={error:u}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}k.calculateExpenses(),k.trackCurrentPosition()}else{k.vertices.push(e);var _=k.calculateDistance(r.lat,r.lng,e.lat,e.lng);k.totalTrackedDistance+=_,k.calculateExpenses(),k.linesToDraw.push([r,e]),k.trackCurrentPosition()}})}).catch(function(t){k.startedTracking&&k.trackCurrentPosition()})})}),this.getDrivers(),this.driverService.monitorDrivers().subscribe(function(t){t&&k.getDrivers()}),this.authenticationService.authState.subscribe(function(t){t&&t.data&&t.data.authenticated?k.getDrivers():t&&t.data&&!t.data.authenticated&&(k.drivers=[],k.vehicles=[],k.currentTrip={},k.selectedDriver=null,k.selectedVehicle=null)}),this.driverService.getSelectedDriver().then(function(t){t&&k.ngZone.run(function(){k.selectedDriver=t})}),this.vehicleService.getSelectedVehicle().then(function(t){t&&k.ngZone.run(function(){k.selectedVehicle=t})}),this.authenticationService.getUserData().subscribe(function(t){t&&t.tax&&(k.tax=JSON.parse(t.tax))})}return t.prototype.ngOnInit=function(){},t.prototype.addVehicle=function(){this.router.navigate(["add-vehicle/"+this.selectedDriver.id])},t.prototype.doShowDrivers=function(){var t=this;this.ngZone.run(function(){t.properties.showDrivers=!t.properties.showDrivers})},t.prototype.getDrivers=function(){var t=this;this.driverService.getDrivers().then(function(e){t.ngZone.run(function(){var r,n,i,o;if(t.drivers=e,t.selectedDriver)try{for(var c=(0,d.XA)(t.drivers),a=c.next();!a.done;a=c.next()){var s=a.value;if(s.id===t.selectedDriver.id&&(t.selectedDriver=s,t.vehicles=t.selectedDriver.vehicles,t.selectedVehicle))try{for(var l=(i=void 0,(0,d.XA)(t.vehicles)),h=l.next();!h.done;h=l.next()){var p=h.value;p.id===t.selectedVehicle.id&&(t.selectedVehicle=p)}}catch(g){i={error:g}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}}}catch(_){r={error:_}}finally{try{a&&!a.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}})})},t.prototype.getCurrentCoordinates=function(){var t=this;this.geolocation.getCurrentPosition(this.locationOptions).then(function(e){t.markerPosition={lat:e.coords.latitude,lng:e.coords.longitude},t.mapCenter={lat:e.coords.latitude,lng:e.coords.longitude},t.mapZoom=17,t.nativeGeocoder.reverseGeocode(e.coords.latitude,e.coords.longitude,t.nativeGeocoderOptions).then(function(e){var r=t.pretifyAddress(e[0]);t.currentAddress=r}).catch(function(t){})}).catch(function(t){})},t.prototype.pretifyAddress=function(t){var e=[];for(var r in t)e.push(t[r]);for(var n in e.reverse(),e);return t.slice(0,-2)},t.prototype.selectDriver=function(t){var e=this;this.ngZone.run(function(){e.selectedDriver=t,e.properties.showDrivers=!1,e.vehicles=e.selectedDriver.vehicles,e.driverService.saveSelectedDriver(e.selectedDriver)})},t.prototype.selectVehicle=function(t){var e=this;this.ngZone.run(function(){e.selectedVehicle=t,e.vehicleService.saveSelectedVehicle(e.selectedVehicle)})},t.prototype.startTracking=function(t){var e=this;this.user&&!this.user.premium_enabled&&this.monthlyTripCount>9?this.alertCtrl.create({header:"Error",message:"You have exceeded your free monthly allowance of 10 trips. Please upgrade to premium to add more trips this month.",buttons:[{text:"Dismiss",role:"cancel",handler:function(t){}},{text:"Upgrade to premium",handler:function(t){e.router.navigate(["/upgrade"])}}]}).then(function(t){t.present()}):this.popoverController.create({component:_,componentProps:{driver:this.selectedDriver,vehicle:this.selectedVehicle},cssClass:"track-start",event:t,translucent:!0}).then(function(t){t.present(),t.onDidDismiss().then(function(t){if(t&&t.data&&t.data.trackingType){e.currentTrip={};var r=t.data.trackingType;"automatic"===r?e.startAutomaticTracking():"manual"===r&&e.trackManually()}})})},t.prototype.startAutomaticTracking=function(){var t=this;this.totalTrackedDistance=0,this.totalTrackedExpenses=0,this.ngZone.run(function(){t.startedTracking=!0}),this.currentTrip.start_date=u().format("YYYY-MM-DD HH:mm:ss"),this.vertices=[],this.linesToDraw=[],this.geolocation.getCurrentPosition(this.locationOptions).then(function(e){t.markerPosition={lat:e.coords.latitude,lng:e.coords.longitude},t.mapCenter={lat:e.coords.latitude,lng:e.coords.longitude},t.currentTrip.start_latitude=e.coords.latitude,t.currentTrip.start_longitude=e.coords.longitude;var r=[];r.push({lat:e.coords.latitude,lng:e.coords.longitude}),t.vertices=r,t.tripService.getAddressFromCoordinates(e.coords.latitude,e.coords.longitude).then(function(e){e&&e.results&&e.results.length>0&&(t.currentTrip.start_address=e.results[0].formatted_address)}).catch(function(t){})}).catch(function(t){}),this.trackCurrentPosition()},t.prototype.trackCurrentPosition=function(){var t=this;this.trackingInterval=this.geolocation.watchPosition(this.locationOptions).subscribe(function(e){if(e&&e.coords){t.markerPosition={lat:e.coords.latitude,lng:e.coords.longitude},t.mapCenter={lat:e.coords.latitude,lng:e.coords.longitude};var r={lat:e.coords.latitude,lng:e.coords.longitude},n=t.vertices[t.vertices.length-1],i=t.calculateDistance(n.lat,n.lng,r.lat,r.lng);t.totalTrackedDistance+=i,t.calculateExpenses(),t.vertices.push(r),t.linesToDraw.push([n,r])}})},t.prototype.stopAutomaticTracking=function(){var t=this;this.trackingInterval.unsubscribe(),this.ngZone.run(function(){t.startedTracking=!1}),this.currentTrip.driver_id=this.selectedDriver.id,this.currentTrip.vehicle_id=this.selectedVehicle.id,this.currentTrip.units=this.selectedDriver.units,this.currentTrip.trip_tax_rate1=this.selectedVehicle.km_tax_rate1,this.currentTrip.trip_tax_rate2=this.selectedVehicle.km_tax_rate2,this.currentTrip.end_date=u().format("YYYY-MM-DD HH:mm:ss"),this.geolocation.getCurrentPosition(this.locationOptions).then(function(e){t.markerPosition={lat:e.coords.latitude,lng:e.coords.longitude},t.mapCenter={lat:e.coords.latitude,lng:e.coords.longitude},t.currentTrip.end_latitude=e.coords.latitude,t.currentTrip.end_longitude=e.coords.longitude;var r={lat:e.coords.latitude,lng:e.coords.longitude},n=t.vertices[t.vertices.length-1],i=t.calculateDistance(n.lat,n.lng,r.lat,r.lng);t.totalTrackedDistance+=i,t.calculateExpenses(),t.currentTrip.total_distance=t.totalTrackedDistance;var o=t.vertices;t.vertices.push(r),t.vertices=o,t.currentTrip.vertices=JSON.stringify(t.vertices),t.tripService.getAddressFromCoordinates(e.coords.latitude,e.coords.longitude).then(function(e){e&&e.results&&e.results.length>0?(t.currentTrip.end_address=e.results[0].formatted_address,t.tripService.createTrip(t.currentTrip).then(function(e){t.currentTrip={},setTimeout(function(){t.router.navigate(["/trip/"+e.id])},200),t.driverService.setDriversUpdated(),t.totalTrackedDistance=0,t.totalTrackedExpenses=0,t.vertices=[],t.linesToDraw=[]})):t.tripService.createTrip(t.currentTrip).then(function(e){t.currentTrip={},t.monthlyTripCount+=1,t.router.navigate(["/trip/"+e.id]),t.driverService.setDriversUpdated(),t.totalTrackedDistance=0,t.totalTrackedExpenses=0,t.vertices=[],t.linesToDraw=[]})}).catch(function(e){t.tripService.createTrip(t.currentTrip).then(function(e){t.currentTrip={},t.monthlyTripCount+=1,t.router.navigate(["/trip/"+e.id]),t.driverService.setDriversUpdated(),t.totalTrackedDistance=0,t.totalTrackedExpenses=0})})}).catch(function(t){})},t.prototype.calculateDistance=function(t,e,r,n){var i=t*(Math.PI/180),o=r*(Math.PI/180),c=o-i,a=(n-e)*(Math.PI/180);return 12742*Math.asin(Math.sqrt(Math.sin(c/2)*Math.sin(c/2)+Math.cos(i)*Math.cos(o)*Math.sin(a/2)*Math.sin(a/2)))},t.prototype.calculateExpenses=function(){var t=this,e=14e3,r=0,n=this.selectedDriver.distance?this.selectedDriver.distance:0;if(n>e)r=this.totalTrackedDistance*this.selectedVehicle.km_tax_rate2;else if(n+this.totalTrackedDistance>e){var i=e-n;r=i*this.selectedVehicle.km_tax_rate1+(this.totalTrackedDistance-i)*this.selectedVehicle.km_tax_rate2}else r=this.totalTrackedDistance*this.selectedVehicle.km_tax_rate1;return this.ngZone.run(function(){t.totalTrackedExpenses=r}),r},t.prototype.trackManually=function(){this.monthlyTripCount+=1,this.router.navigate(["/add-trip"],{queryParams:{driver_id:this.selectedDriver.id,vehicle_id:this.selectedVehicle.id,trip_tax_rate1:this.selectedVehicle.km_tax_rate1,trip_tax_rate2:this.selectedVehicle.km_tax_rate2,units:this.selectedDriver.units}})},t.\u0275fac=function(e){return new(e||t)(g.Y36(o.eN),g.Y36(a.Dh),g.Y36(v.b),g.Y36(f.d),g.Y36(k.F),g.Y36(m.f),g.Y36(a.Br),g.Y36(x.a),g.Y36(s.F0),g.Y36(a.t4),g.Y36(g.R0b),g.Y36(C.$),g.Y36(g.sBO))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-track"]],decls:18,vars:20,consts:[[1,"track-header",3,"ngClass"],["color","light"],["color","primary"],["class","track-header__subtitle",4,"ngIf"],[1,"track-header__driver",3,"click"],[4,"ngIf"],[3,"name"],["class","track-header__expenses",4,"ngIf"],["slot","end","class","track-header__account",4,"ngIf"],["class","track-header__vehicles",4,"ngIf"],["class","track-header__drivers",3,"ngClass",4,"ngIf"],[1,"track",3,"ngClass"],["class","track__start-tracking",4,"ngIf"],[1,"track-header__subtitle"],[1,"track-header__expenses"],["slot","end",1,"track-header__account"],["name","account"],[1,"track-header__account__total-expenses"],[1,"track-header__vehicles"],["class","track-header__vehicles__vehicle",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"track-header__vehicles__vehicle",3,"click"],["name","add"],[1,"track-header__vehicles__vehicle",3,"ngClass","click"],["name","wheel"],[1,"track-header__drivers",3,"ngClass"],["class","track-header__drivers__driver",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"track-header__drivers__add"],["color","light","shape","round","expand","full","routerDirection","forward",3,"routerLink"],[1,"track-header__drivers__driver",3,"ngClass","click"],["height","100%","width","100%",1,"track__map",3,"options","center","zoom"],[3,"position","options"],[3,"path","options",4,"ngFor","ngForOf"],[3,"path","options"],[1,"track__start-tracking"],["color","primary","shape","round",3,"click"],["color","light","shape","round",3,"click"]],template:function(t,e){1&t&&(g.TgZ(0,"ion-header",0),g.TgZ(1,"ion-toolbar",1),g.TgZ(2,"ion-title",2),g.YNc(3,O,2,0,"p",3),g.YNc(4,M,2,0,"p",3),g.TgZ(5,"div",4),g.NdJ("click",function(){return e.doShowDrivers()}),g.YNc(6,P,2,0,"span",5),g.YNc(7,T,2,2,"span",5),g._UZ(8,"ion-icon",6),g.qZA(),g.YNc(9,Z,6,4,"div",7),g.qZA(),g.YNc(10,b,9,4,"ion-buttons",8),g.qZA(),g.YNc(11,w,5,1,"div",9),g.YNc(12,J,6,6,"div",10),g.qZA(),g.TgZ(13,"ion-content",11),g.YNc(14,V,4,6,"div",5),g.ALo(15,"async"),g.YNc(16,I,3,0,"div",12),g.YNc(17,N,3,0,"div",12),g.qZA()),2&t&&(g.Q6J("ngClass",g.VKq(16,z,e.selectedDriver)),g.xp6(3),g.Q6J("ngIf",!e.selectedDriver),g.xp6(1),g.Q6J("ngIf",e.selectedDriver),g.xp6(2),g.Q6J("ngIf",!e.selectedDriver),g.xp6(1),g.Q6J("ngIf",e.selectedDriver),g.xp6(1),g.Q6J("name",e.properties.showDrivers?"chevron-up":"chevron-down"),g.xp6(1),g.Q6J("ngIf",e.selectedDriver),g.xp6(1),g.Q6J("ngIf",e.selectedDriver),g.xp6(1),g.Q6J("ngIf",e.selectedDriver),g.xp6(1),g.Q6J("ngIf",e.properties.showDrivers),g.xp6(1),g.Q6J("ngClass",g.VKq(18,Q,e.selectedDriver)),g.xp6(1),g.Q6J("ngIf",g.lcZ(15,14,e.apiLoaded)),g.xp6(2),g.Q6J("ngIf",e.selectedDriver&&e.selectedVehicle&&!e.startedTracking),g.xp6(1),g.Q6J("ngIf",e.startedTracking))},directives:[a.Gu,i.mk,a.sr,a.wd,i.O5,a.gu,a.W2,a.Sm,a.YG,i.sg,a.YI,s.rH,n.b6,n.O_,n.Ad],pipes:[i.Ov,i.JJ],styles:[".track-header.ios[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{--padding-top:0px;--padding-bottom:0px}.track-header.ios[_ngcontent-%COMP%]   .track-header__drivers[_ngcontent-%COMP%]{margin-top:var(--ion-safe-area-top,0)}.track-header[_ngcontent-%COMP%]   .track-header__subtitle[_ngcontent-%COMP%]{color:#b0b0b0;font-size:14px;font-weight:600;line-height:17px;letter-spacing:-.02em;margin:10px 0 0}.track-header[_ngcontent-%COMP%]   .track-header__driver[_ngcontent-%COMP%]{margin-bottom:10px;display:block;letter-spacing:-.02em;font-weight:600;font-size:22px;line-height:27px;z-index:99;position:relative;pointer-events:all}.track-header[_ngcontent-%COMP%]   .track-header__driver[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{vertical-align:middle}.track-header.track-header--driver-selected[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-bottom:5px}.track-header[_ngcontent-%COMP%]   .track-header__account[_ngcontent-%COMP%]{pointer-events:none;flex-direction:column;padding-right:10px}.track-header[_ngcontent-%COMP%]   .track-header__account[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-width:0px;--box-shadow:none;box-shadow:none;font-size:28px;height:40px}.track-header[_ngcontent-%COMP%]   .track-header__account[_ngcontent-%COMP%]   .track-header__account__total-expenses[_ngcontent-%COMP%]{text-align:Center;margin-top:3px}.track-header[_ngcontent-%COMP%]   .track-header__account[_ngcontent-%COMP%]   .track-header__account__total-expenses[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{display:block;font-size:10px;line-height:16px;color:#23232399;margin:0;white-space:nowrap}.track-header[_ngcontent-%COMP%]   .track-header__account[_ngcontent-%COMP%]   .track-header__account__total-expenses[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;font-size:13px;line-height:16px;letter-spacing:-.02em;color:#232323;margin:0;display:inline-block;background:#23232314;border-radius:8px;padding:2px 4px;white-space:nowrap}.track-header[_ngcontent-%COMP%]   .track-header__expenses[_ngcontent-%COMP%]{margin-bottom:15px}.track-header[_ngcontent-%COMP%]   .track-header__expenses[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;font-size:22px;line-height:27px;letter-spacing:-.02em;color:#232323;display:inline-block;background:#23232314;border-radius:8px;padding:2px 4px;margin:0 10px 0 0}.track-header[_ngcontent-%COMP%]   .track-header__expenses[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;line-height:17px;color:#23232399;margin:0;display:inline-block}.track-header[_ngcontent-%COMP%]   .track-header__drivers[_ngcontent-%COMP%]{position:absolute;left:0;top:45px;background-color:#fff;width:100%;padding:30px 20px 15px}.track-header[_ngcontent-%COMP%]   .track-header__drivers.track-header__drivers--driver-selected[_ngcontent-%COMP%]{top:85px}.track-header[_ngcontent-%COMP%]   .track-header__drivers[_ngcontent-%COMP%]   .track-header__drivers__driver[_ngcontent-%COMP%]{padding-top:20px;padding-bottom:20px;border-bottom:1px solid #2323231f}.track-header[_ngcontent-%COMP%]   .track-header__drivers[_ngcontent-%COMP%]   .track-header__drivers__driver.track-header__drivers__driver--last[_ngcontent-%COMP%]{border-bottom:none}.track-header[_ngcontent-%COMP%]   .track-header__drivers[_ngcontent-%COMP%]   .track-header__drivers__driver[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:Lexend;font-style:normal;font-weight:600;font-size:18px;line-height:22px;letter-spacing:-.02em;color:#232323;display:inline-block;margin:0}.track-header[_ngcontent-%COMP%]   .track-header__drivers[_ngcontent-%COMP%]   .track-header__drivers__driver[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;font-size:18px;line-height:22px;letter-spacing:-.02em;color:#23232366;margin:0;display:inline-block;float:right}.track-header[_ngcontent-%COMP%]   .track-header__drivers[_ngcontent-%COMP%]   .track-header__drivers__add[_ngcontent-%COMP%]{margin-top:10px}.track-header[_ngcontent-%COMP%]   .track-header__drivers[_ngcontent-%COMP%]   .track-header__drivers__add[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{box-shadow:none;--ion-color-base:#fff4eb!important;--ion-color-base-rgb:#fff4eb!important;--ion-color-contrast:#ff7a00!important;--ion-color-contrast-rgb:#ff7a00!important;--box-shadow:none}.track-header[_ngcontent-%COMP%]   .track-header__vehicles[_ngcontent-%COMP%]{position:absolute;left:0;width:100%;white-space:nowrap;margin-top:10px;padding:0 20px 5px;overflow-x:scroll}.track-header[_ngcontent-%COMP%]   .track-header__vehicles[_ngcontent-%COMP%]   .track-header__vehicles__vehicle[_ngcontent-%COMP%]{font-weight:600;font-size:14px;line-height:17px;letter-spacing:-.02em;background:#fff;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;border-radius:100px;color:#232323;padding:8px 10px;display:inline-block;margin-right:8px}.track-header[_ngcontent-%COMP%]   .track-header__vehicles[_ngcontent-%COMP%]   .track-header__vehicles__vehicle[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#000;vertical-align:middle}.track-header[_ngcontent-%COMP%]   .track-header__vehicles[_ngcontent-%COMP%]   .track-header__vehicles__vehicle.track-header__vehicles__vehicle--selected[_ngcontent-%COMP%]{border:2px solid #ff7a00;color:#ff7a00;padding:6px 8px}.track-header[_ngcontent-%COMP%]   .track-header__vehicles[_ngcontent-%COMP%]   .track-header__vehicles__vehicle.track-header__vehicles__vehicle--selected[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#ff7a00}.track[_ngcontent-%COMP%]{transform:translateY(-15px);flex:none}.track[_ngcontent-%COMP%], .track[_ngcontent-%COMP%]   .track__map[_ngcontent-%COMP%]{height:calc(100vh - 106px)}.track[_ngcontent-%COMP%]   .track__map[_ngcontent-%COMP%]{width:100vw;position:relative;display:block}.track.track--driver-selected[_ngcontent-%COMP%], .track.track--driver-selected[_ngcontent-%COMP%]   .track__map[_ngcontent-%COMP%]{height:calc(100vh - 147px)}.track[_ngcontent-%COMP%]   .track__start-tracking[_ngcontent-%COMP%]{position:fixed;bottom:15px;left:0;width:100%;text-align:Center}.track[_ngcontent-%COMP%]   .track__start-tracking[_ngcontent-%COMP%]   ion-button[color=light][_ngcontent-%COMP%]{--ion-color-contrast:#ff7a00!important}"]}),t}()}],F=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[s.Bz.forChild(E)],s.Bz]}),t}(),L=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[i.ez,c.u5,a.Pc]]}),t}(),H=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[i.ez,n.Y4,o.JF,o.Ed,c.u5,a.Pc,F,L]]}),t}()}}]);