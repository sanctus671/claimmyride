(self.webpackChunkclaimmyride=self.webpackChunkclaimmyride||[]).push([[5109],{5109:function(e,t,i){"use strict";i.r(t),i.d(t,{EditVehiclePageModule:function(){return m}});var n=i(1116),o=i(1462),r=i(8809),l=i(578),c=i(5803),a=i(2827),h=i(6282),u=i(9899),g=i(303);function s(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"ion-item"),c.TgZ(2,"ion-label",9),c._uU(3,"Vehicle Make"),c.qZA(),c.TgZ(4,"ion-input",10),c.NdJ("ngModelChange",function(e){return c.CHM(i),c.oxw().vehicle.make=e}),c.qZA(),c.qZA(),c.TgZ(5,"ion-item"),c.TgZ(6,"ion-label",9),c._uU(7,"Vehicle Model"),c.qZA(),c.TgZ(8,"ion-input",10),c.NdJ("ngModelChange",function(e){return c.CHM(i),c.oxw().vehicle.model=e}),c.qZA(),c.qZA(),c.TgZ(9,"ion-item"),c.TgZ(10,"ion-label",9),c._uU(11,"Vehicle Year"),c.qZA(),c.TgZ(12,"ion-input",10),c.NdJ("ngModelChange",function(e){return c.CHM(i),c.oxw().vehicle.year=e}),c.qZA(),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(4),c.Q6J("ngModel",n.vehicle.make),c.xp6(4),c.Q6J("ngModel",n.vehicle.model),c.xp6(4),c.Q6J("ngModel",n.vehicle.year)}}function p(e,t){if(1&e&&(c.TgZ(0,"ion-select-option",23),c._uU(1),c.qZA()),2&e){var i=t.$implicit;c.Q6J("value",i.id),c.xp6(1),c.Oqu(i.name)}}function d(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"ion-item"),c.TgZ(2,"ion-label",9),c._uU(3,"Vehicle Type Name"),c.qZA(),c.TgZ(4,"ion-input",10),c.NdJ("ngModelChange",function(e){return c.CHM(i),c.oxw().vehicle.vehicle_type_name=e}),c.qZA(),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(4),c.Q6J("ngModel",n.vehicle.vehicle_type_name)}}function _(e,t){if(1&e&&(c.TgZ(0,"p",24),c._uU(1),c.qZA()),2&e){var i=c.oxw();c.xp6(1),c.Oqu(i.vehicle.error)}}function v(e,t){1&e&&c._UZ(0,"ion-spinner")}var Z=[{path:"",component:function(){function e(e,t,i,n,o,r,l){var c=this;this.driverService=e,this.vehicleService=t,this.navCtrl=i,this.alertCtrl=n,this.activatedRoute=o,this.iab=r,this.authenticationService=l,this.vehicle={},this.vehicleService.getVehicleTypes().then(function(e){c.vehicleTypes=e});var a=parseInt(this.activatedRoute.snapshot.params.vehicleId);this.vehicle.id=a,this.tax={tier_one_petrol:.79,tier_one_hybrid:.79,tier_one_electric:.79,tier_two_petrol:.27,tier_two_hybrid:.16,tier_two_electric:.09},this.user={},this.authenticationService.retreiveUserData().then(function(e){c.user=e,c.user.tax&&(c.tax=JSON.parse(c.user.tax))}),this.getVehicle()}return e.prototype.ngOnInit=function(){},e.prototype.getVehicle=function(){var e=this;this.vehicleService.getVehicle(this.vehicle.id).then(function(t){e.vehicle=t})},e.prototype.openLink=function(e){this.iab.create(e,"_system")},e.prototype.updateTaxRates=function(){"petrol"===this.vehicle.fuel_type?(this.vehicle.km_tax_rate1=this.tax.tier_one_petrol,this.vehicle.km_tax_rate2=this.tax.tier_two_petrol):"hybrid"===this.vehicle.fuel_type?(this.vehicle.km_tax_rate1=this.tax.tier_one_hybrid,this.vehicle.km_tax_rate2=this.tax.tier_two_hybrid):"electric"===this.vehicle.fuel_type&&(this.vehicle.km_tax_rate1=this.tax.tier_one_electric,this.vehicle.km_tax_rate2=this.tax.tier_two_electric)},e.prototype.update=function(){var e=this;this.vehicle.loading=!0,this.vehicleService.updateVehicle(this.vehicle).then(function(){e.vehicle.loading=!1,e.driverService.setDriversUpdated(),e.navCtrl.back()}).catch(function(){e.vehicle.loading=!1,e.alertCtrl.create({header:"Error",message:"There was an error while updating your vehicle. Please try again.",buttons:[{text:"Dismiss",role:"cancel",handler:function(e){}}]}).then(function(e){e.present()})})},e.prototype.deleteVehicle=function(){var e=this;this.alertCtrl.create({header:"Delete Vehicle",subHeader:"Are you sure you want to delete this vehicle?",buttons:[{text:"Cancel",role:"cancel",handler:function(e){}},{text:"Yes",handler:function(t){e.vehicle.loading=!0,e.vehicleService.deleteVehicle(e.vehicle.id).then(function(){e.driverService.setDriversUpdated(),e.vehicle.loading=!1,e.navCtrl.back()})}}]}).then(function(e){e.present()})},e.\u0275fac=function(t){return new(t||e)(c.Y36(a.F),c.Y36(h.f),c.Y36(r.SH),c.Y36(r.Br),c.Y36(l.gz),c.Y36(u.i),c.Y36(g.$))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-edit-vehicle"]],decls:60,vars:13,consts:[["color","light"],["slot","start"],["defaultHref","/tabs/settings","color","primary"],["color","primary"],["slot","end"],["color","primary",3,"click"],["name","trash"],[1,"signup"],[1,"signup__form"],["position","floating"],["clearInput","","type","text",3,"ngModel","ngModelChange"],[4,"ngIf"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["value","create"],["value","petrol"],["value","hybrid"],["value","electric"],[1,"input-sub-text"],[3,"click"],["class","signup__form__error",4,"ngIf"],[1,"signup-footer"],["color","primary","expand","full","shape","round",1,"signup-footer__button",3,"disabled","click"],[3,"value"],[1,"signup__form__error"]],template:function(e,t){1&e&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar",0),c.TgZ(2,"ion-buttons",1),c._UZ(3,"ion-back-button",2),c.qZA(),c.TgZ(4,"ion-title",3),c._uU(5,"Edit Vehicle"),c.qZA(),c.TgZ(6,"ion-buttons",4),c.TgZ(7,"ion-button",5),c.NdJ("click",function(){return t.deleteVehicle()}),c._UZ(8,"ion-icon",6),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(9,"ion-content",7),c.TgZ(10,"ion-list",8),c.TgZ(11,"ion-item"),c.TgZ(12,"ion-label",9),c._uU(13,"Vehicle Name"),c.qZA(),c.TgZ(14,"ion-input",10),c.NdJ("ngModelChange",function(e){return t.vehicle.name=e}),c.qZA(),c.qZA(),c.TgZ(15,"ion-item"),c.TgZ(16,"ion-label",9),c._uU(17,"Vehicle Registration"),c.qZA(),c.TgZ(18,"ion-input",10),c.NdJ("ngModelChange",function(e){return t.vehicle.registration=e}),c.qZA(),c.qZA(),c.YNc(19,s,13,3,"div",11),c.TgZ(20,"ion-item"),c.TgZ(21,"ion-label",9),c._uU(22,"Vehicle Odometer Reading"),c.qZA(),c.TgZ(23,"ion-input",10),c.NdJ("ngModelChange",function(e){return t.vehicle.odometer=e}),c.qZA(),c.qZA(),c.TgZ(24,"ion-item"),c.TgZ(25,"ion-label",9),c._uU(26,"Usage Type"),c.qZA(),c.TgZ(27,"ion-select",12),c.NdJ("ngModelChange",function(e){return t.vehicle.vehicle_type_id=e}),c.YNc(28,p,2,2,"ion-select-option",13),c.TgZ(29,"ion-select-option",14),c._uU(30,"Add Vehicle Type"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(31,"ion-item"),c.TgZ(32,"ion-label",9),c._uU(33,"Fuel Type"),c.qZA(),c.TgZ(34,"ion-select",12),c.NdJ("ngModelChange",function(e){return t.vehicle.fuel_type=e}),c.TgZ(35,"ion-select-option",15),c._uU(36,"Petrol or Diesel"),c.qZA(),c.TgZ(37,"ion-select-option",16),c._uU(38,"Petrol Hybrid"),c.qZA(),c.TgZ(39,"ion-select-option",17),c._uU(40,"Electric"),c.qZA(),c.qZA(),c.qZA(),c.YNc(41,d,5,1,"div",11),c.TgZ(42,"ion-item"),c.TgZ(43,"ion-label",9),c._uU(44,"Teir 1 Tax Rate ($)"),c.qZA(),c.TgZ(45,"ion-input",10),c.NdJ("ngModelChange",function(e){return t.vehicle.km_tax_rate1=e}),c.qZA(),c.TgZ(46,"p",18),c._uU(47,"To learn more about vehicle tax rates and what you can claim, visit the IRD website "),c.TgZ(48,"a",19),c.NdJ("click",function(){return t.openLink("https://www.ird.govt.nz/income-tax/income-tax-for-businesses-and-organisations/types-of-business-expenses/claiming-vehicle-expenses")}),c._uU(49,"here"),c.qZA(),c._uU(50,"."),c.qZA(),c.qZA(),c.TgZ(51,"ion-item"),c.TgZ(52,"ion-label",9),c._uU(53,"Teir 2 Tax Rate ($)"),c.qZA(),c.TgZ(54,"ion-input",10),c.NdJ("ngModelChange",function(e){return t.vehicle.km_tax_rate2=e}),c.qZA(),c.qZA(),c.YNc(55,_,2,1,"p",20),c.qZA(),c.qZA(),c.TgZ(56,"ion-footer",21),c.TgZ(57,"ion-button",22),c.NdJ("click",function(){return t.update()}),c._uU(58," Update Vehicle "),c.YNc(59,v,1,0,"ion-spinner",11),c.qZA(),c.qZA()),2&e&&(c.xp6(14),c.Q6J("ngModel",t.vehicle.name),c.xp6(4),c.Q6J("ngModel",t.vehicle.registration),c.xp6(1),c.Q6J("ngIf",t.vehicle.registration&&t.vehicle.lookupCompleted),c.xp6(4),c.Q6J("ngModel",t.vehicle.odometer),c.xp6(4),c.Q6J("ngModel",t.vehicle.vehicle_type_id),c.xp6(1),c.Q6J("ngForOf",t.vehicleTypes),c.xp6(6),c.Q6J("ngModel",t.vehicle.fuel_type),c.xp6(7),c.Q6J("ngIf","create"===t.vehicle.vehicle_type_id),c.xp6(4),c.Q6J("ngModel",t.vehicle.km_tax_rate1),c.xp6(9),c.Q6J("ngModel",t.vehicle.km_tax_rate2),c.xp6(1),c.Q6J("ngIf",t.vehicle.error),c.xp6(2),c.Q6J("disabled",t.vehicle.loading),c.xp6(2),c.Q6J("ngIf",t.vehicle.loading))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.wd,r.YG,r.gu,r.W2,r.q_,r.Ie,r.Q$,r.pK,r.j9,o.JJ,o.On,n.O5,r.t9,r.QI,n.sg,r.n0,r.fr,r.PQ],styles:[".signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__error[_ngcontent-%COMP%]{color:red;font-size:12px;line-height:16px;text-align:Center}.signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__login[_ngcontent-%COMP%]{margin-top:40px;text-align:Center}.signup[_ngcontent-%COMP%]   .input-sub-text[_ngcontent-%COMP%]{font-size:12px;margin:0 0 10px}.signup-footer[_ngcontent-%COMP%]{background-color:#fff}.signup-footer[_ngcontent-%COMP%]:before{display:none}.signup-footer[_ngcontent-%COMP%]   .signup-footer__button[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px;margin-left:5px}"]}),e}()}],f=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[l.Bz.forChild(Z)],l.Bz]}),e}(),m=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[n.ez,o.u5,r.Pc,f]]}),e}()}}]);