(self.webpackChunkclaimmyride=self.webpackChunkclaimmyride||[]).push([[5820],{5820:function(e,n,t){"use strict";t.r(n),t.d(n,{SettingsPageModule:function(){return Z}});var i=t(1116),o=t(1462),r=t(8809),a=t(578),s=t(5803),c=t(303),u=t(9899),l=function(){return["/manage-drivers"]},h=function(){return["/manage-vehicles"]},g=function(){return["/manage-trip-categories"]},p=function(){return["/tax-settings"]},d=function(){return["/upgrade"]},m=[{path:"",component:function(){function e(e,n,t,i,o,r){var a=this;this.plt=e,this.authenticationService=n,this.alertCtrl=t,this.iab=i,this.modalController=o,this.loadingController=r,this.user={},this.authenticationService.getUserData().subscribe(function(e){a.user=e})}return e.prototype.ngOnInit=function(){},e.prototype.ionViewDidEnter=function(){},e.prototype.syncXero=function(){this.loadingController.create({message:"Connecting to Xero. Please wait...",duration:2e4}).then(function(e){e.present()})},e.prototype.openRate=function(){this.plt.is("ios")?this.iab.create("https://itunes.apple.com/","_system"):this.iab.create("https://play.google.com/store/apps/details?id=com.claimmyride.app","_system")},e.prototype.openFollow=function(){this.iab.create("https://www.facebook.com/","_system")},e.prototype.openEmail=function(){this.iab.create("mailto:craig@gmail.com","_system")},e.prototype.openChangeUnits=function(){var e=this;this.alertCtrl.create({header:"Change Units",inputs:[{name:"units",type:"radio",label:"Kilometre",value:"km",checked:!this.user.units||"km"===this.user.units},{name:"units",type:"radio",label:"Miles",value:"miles",checked:!(!this.user.units||"miles"!==this.user.units)}],buttons:[{text:"Cancel",role:"cancel",handler:function(e){}},{text:"Change",handler:function(n){n&&(e.user.units=n,e.authenticationService.updateUser({units:n}).then(function(){}))}}]}).then(function(e){e.present()})},e.prototype.openChangeEmail=function(){var e=this;this.alertCtrl.create({header:"Change Email",inputs:[{name:"email",placeholder:"Email",type:"text",value:this.user.email}],buttons:[{text:"Cancel",role:"cancel",handler:function(e){}},{text:"Change",handler:function(n){n.email&&e.authenticationService.changeEmail(e.user.email).then(function(){e.alertCtrl.create({header:"Success",message:"Your email has been updated",buttons:[{text:"Dismiss",role:"cancel",handler:function(e){}}]}).then(function(e){e.present()})}).catch(function(){e.alertCtrl.create({header:"Error",message:"There was an error while changing your email.",buttons:[{text:"Cancel",role:"cancel",handler:function(e){}},{text:"Try Again",handler:function(n){setTimeout(function(){e.openChangeEmail()},200)}}]}).then(function(e){e.present()})})}}]}).then(function(e){e.present()})},e.prototype.openChangePassword=function(){var e=this;this.alertCtrl.create({header:"Change Password",inputs:[{name:"password",placeholder:"Password",type:"password"},{name:"confirmPassword",placeholder:"Confirm Password",type:"password"}],buttons:[{text:"Cancel",role:"cancel",handler:function(e){}},{text:"Change",handler:function(n){n.password&&n.confirmPassword&&n.password===n.confirmPassword?e.authenticationService.changePassword(e.user.email,n.password,n.confirmPassword).then(function(){e.alertCtrl.create({header:"Success",message:"Your password has been updated",buttons:[{text:"Dismiss",role:"cancel",handler:function(e){}}]}).then(function(e){e.present()})}).catch(function(){e.alertCtrl.create({header:"Error",message:"There was an error while changing your password.",buttons:[{text:"Cancel",role:"cancel",handler:function(e){}},{text:"Try Again",handler:function(n){setTimeout(function(){e.openChangePassword()},200)}}]}).then(function(e){e.present()})}):e.alertCtrl.create({header:"Error",message:"Passwords do not match",buttons:[{text:"Cancel",role:"cancel",handler:function(e){}},{text:"Try Again",handler:function(n){setTimeout(function(){e.openChangePassword()},200)}}]}).then(function(e){e.present()})}}]}).then(function(e){e.present()})},e.prototype.logout=function(){this.authenticationService.logout()},e.\u0275fac=function(n){return new(n||e)(s.Y36(r.t4),s.Y36(c.$),s.Y36(r.Br),s.Y36(u.i),s.Y36(r.IN),s.Y36(r.HT))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-settings"]],decls:56,vars:10,consts:[[1,"settings-header"],["color","light"],["color","primary"],[1,"settings"],["routerDirection","forward","mode","md","detail","false",3,"routerLink"],["name","chevron-forward-outline","slot","end","color","primary"],["mode","md","detail","false",3,"click"],[1,"settings__header"]],template:function(e,n){1&e&&(s.TgZ(0,"ion-header",0),s.TgZ(1,"ion-toolbar",1),s.TgZ(2,"ion-title",2),s._uU(3,"Settings"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(4,"ion-content",3),s.TgZ(5,"ion-list"),s.TgZ(6,"ion-list-header"),s._uU(7,"Tracking"),s.qZA(),s.TgZ(8,"ion-item",4),s.TgZ(9,"ion-label"),s._uU(10,"Manage Drivers"),s.qZA(),s._UZ(11,"ion-icon",5),s.qZA(),s.TgZ(12,"ion-item",4),s.TgZ(13,"ion-label"),s._uU(14,"Manage Vehicles"),s.qZA(),s._UZ(15,"ion-icon",5),s.qZA(),s.TgZ(16,"ion-item",4),s.TgZ(17,"ion-label"),s._uU(18,"Manage Trip Categories"),s.qZA(),s._UZ(19,"ion-icon",5),s.qZA(),s.TgZ(20,"ion-item",4),s.TgZ(21,"ion-label"),s._uU(22,"KM Expense Claim Rates"),s.qZA(),s._UZ(23,"ion-icon",5),s.qZA(),s.TgZ(24,"ion-item",6),s.NdJ("click",function(){return n.syncXero()}),s.TgZ(25,"ion-label"),s._uU(26,"Sync with Xero"),s.qZA(),s._UZ(27,"ion-icon",5),s.qZA(),s.TgZ(28,"ion-list-header",7),s._uU(29,"Account"),s.qZA(),s.TgZ(30,"ion-item",4),s.TgZ(31,"ion-label"),s._uU(32,"Upgrade To Premium"),s.qZA(),s._UZ(33,"ion-icon",5),s.qZA(),s.TgZ(34,"ion-item",6),s.NdJ("click",function(){return n.openChangeEmail()}),s.TgZ(35,"ion-label"),s._uU(36,"Change Email"),s.qZA(),s._UZ(37,"ion-icon",5),s.qZA(),s.TgZ(38,"ion-item",6),s.NdJ("click",function(){return n.openChangePassword()}),s.TgZ(39,"ion-label"),s._uU(40,"Change Password"),s.qZA(),s._UZ(41,"ion-icon",5),s.qZA(),s.TgZ(42,"ion-item",6),s.NdJ("click",function(){return n.logout()}),s._uU(43," Logout "),s._UZ(44,"ion-icon",5),s.qZA(),s.TgZ(45,"ion-list-header",7),s._uU(46,"Support"),s.qZA(),s.TgZ(47,"ion-item",6),s.NdJ("click",function(){return n.openRate()}),s._uU(48," Rate The App "),s._UZ(49,"ion-icon",5),s.qZA(),s.TgZ(50,"ion-item",6),s.NdJ("click",function(){return n.openFollow()}),s._uU(51," Follow Us "),s._UZ(52,"ion-icon",5),s.qZA(),s.TgZ(53,"ion-item",6),s.NdJ("click",function(){return n.openEmail()}),s._uU(54," Contact Support "),s._UZ(55,"ion-icon",5),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.xp6(8),s.Q6J("routerLink",s.DdM(5,l)),s.xp6(4),s.Q6J("routerLink",s.DdM(6,h)),s.xp6(4),s.Q6J("routerLink",s.DdM(7,g)),s.xp6(4),s.Q6J("routerLink",s.DdM(8,p)),s.xp6(10),s.Q6J("routerLink",s.DdM(9,d)))},directives:[r.Gu,r.sr,r.wd,r.W2,r.q_,r.yh,r.Ie,r.YI,a.rH,r.Q$,r.gu],styles:[".settings-header[_ngcontent-%COMP%]{background-color:#f6f7eb}.settings[_ngcontent-%COMP%], .settings[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{--background:#f6f7eb}.settings[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{background:#f6f7eb}.settings[_ngcontent-%COMP%]   ion-list.ios[_ngcontent-%COMP%]{margin-top:15px}.settings[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{--background:#f6f7eb;color:#23232366}.settings[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-list-header.ios[_ngcontent-%COMP%]{font-size:14px;font-weight:400;min-height:45px;line-height:45px}.settings[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   .settings__header[_ngcontent-%COMP%]{margin-top:10px}"]}),e}()}],f=function(){function e(){}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[a.Bz.forChild(m)],a.Bz]}),e}(),Z=function(){function e(){}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[i.ez,o.u5,r.Pc,f]]}),e}()}}]);