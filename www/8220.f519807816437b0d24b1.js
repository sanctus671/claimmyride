(self.webpackChunkclaimmyride=self.webpackChunkclaimmyride||[]).push([[8220],{8220:function(t,i,n){"use strict";n.r(i),n.d(i,{HistoryPageModule:function(){return u}});var o=n(1116),_=n(1462),r=n(8809),e=n(578),s=n(4762),c=n(9609),a=n(5803),p=n(2123);function l(t,i){1&t&&(a.TgZ(0,"div",11),a._UZ(1,"ion-spinner",2),a.qZA())}function g(t,i){1&t&&a._UZ(0,"span")}var h=function(t){return[t]};function d(t,i){if(1&t&&(a.TgZ(0,"div",15),a.TgZ(1,"div",16),a.TgZ(2,"h3"),a._uU(3),a.YNc(4,g,1,0,"span",17),a.qZA(),a.TgZ(5,"p"),a._uU(6),a.qZA(),a.TgZ(7,"div",18),a._uU(8),a.ALo(9,"number"),a.qZA(),a.qZA(),a.TgZ(10,"div",19),a.TgZ(11,"div",20),a.TgZ(12,"div",21),a._uU(13),a.qZA(),a.TgZ(14,"div",22),a._uU(15),a.qZA(),a.qZA(),a.TgZ(16,"div",23),a.TgZ(17,"div",21),a._uU(18),a.qZA(),a.TgZ(19,"div",22),a._uU(20),a.qZA(),a.qZA(),a.TgZ(21,"div",24),a._uU(22),a.ALo(23,"number"),a.TgZ(24,"span"),a._uU(25),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t){var n=i.$implicit,o=a.oxw(2);a.Q6J("routerLink",a.VKq(17,h,"/trip/"+n.id)),a.xp6(3),a.hij("",o.formatDate(n.start_date)," "),a.xp6(1),a.Q6J("ngIf",!n.vertices),a.xp6(2),a.hij("Trip #",n.count,""),a.xp6(2),a.hij(" $",a.xi3(9,11,n.reimbursement,"1.0-2")," "),a.xp6(5),a.Oqu(o.formatTime(n.start_date)),a.xp6(2),a.Oqu(n.start_address?n.start_address:"Latitude: "+n.start_latitude+", Longitude: "+n.start_longitude),a.xp6(3),a.Oqu(o.formatTime(n.end_date)),a.xp6(2),a.Oqu(n.end_address?n.end_address:"Latitude: "+n.end_latitude+", Longitude: "+n.end_longitude),a.xp6(2),a.hij(" ",a.xi3(23,14,n.total_distance,"1.2-2")," "),a.xp6(3),a.Oqu(n.units?n.units:"km")}}function y(t,i){if(1&t&&(a.TgZ(0,"div",12),a.TgZ(1,"div",13),a.TgZ(2,"span"),a._uU(3),a.qZA(),a.qZA(),a.YNc(4,d,26,19,"div",14),a.qZA()),2&t){var n=i.$implicit,o=a.oxw();a.xp6(3),a.Oqu(o.formatMonth(n)),a.xp6(1),a.Q6J("ngForOf",o.trips[n])}}var M=[{path:"",component:function(){function t(t,i){var n=this;this.tripService=t,this.ngZone=i,this.tripDates=[],this.displayedTripDates=[],this.trips={},this.loading=!0,this.datePickerOptions={buttons:[{text:"Clear",handler:function(){n.displayedTripDates=n.tripDates,n.selectedDate=null}},{text:"Cancel",handler:function(){}},{text:"Set",handler:function(t){n.selectedDate=t.month.text+", "+t.year.text;var i=""+t.month.value;1===i.length&&(i="0"+i),n.displayedTripDates=[t.year.value+"-"+i+"-01"]}}]},this.tripService.monitorTrips().subscribe(function(t){t&&n.getTrips()})}return t.prototype.ionViewDidEnter=function(){this.getTrips()},t.prototype.ngOnInit=function(){},t.prototype.getTrips=function(){var t=this;this.tripService.getTrips().then(function(i){t.ngZone.run(function(){var n,o;t.trips={},t.tripDates=[];var _=i.length;try{for(var r=(0,s.XA)(i),e=r.next();!e.done;e=r.next()){var a=e.value;a.count=_;var p=c(a.start_date).format("YYYY-MM-01");t.trips[p]?t.trips[p].push(a):(t.trips[p]=[a],t.tripDates.push(p)),_-=1}}catch(l){n={error:l}}finally{try{e&&!e.done&&(o=r.return)&&o.call(r)}finally{if(n)throw n.error}}t.displayedTripDates=t.tripDates,t.loading=!1})})},t.prototype.formatDate=function(t){return c(t).format("dddd, Do MMMM")},t.prototype.formatTime=function(t){return c(t).format("h:mma")},t.prototype.formatMonth=function(t){return c(t).format("MMMM YYYY")},t.\u0275fac=function(i){return new(i||t)(a.Y36(p.a),a.Y36(a.R0b))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-history"]],decls:12,vars:4,consts:[[1,"trip-history-header"],["color","light"],["color","primary"],["slot","end",1,"trip-history-header__date"],["color","primary",3,"click"],["pickerFormat","MMMM YYYY","displayFormat","MMM YYYY",3,"ngModel","pickerOptions","ngModelChange"],["picker",""],["name","date"],[1,"history"],["class","history__loading",4,"ngIf"],["class","history__list",4,"ngFor","ngForOf"],[1,"history__loading"],[1,"history__list"],[1,"history__list__header"],["class","history__list__trip","routerDirection","forward",3,"routerLink",4,"ngFor","ngForOf"],["routerDirection","forward",1,"history__list__trip",3,"routerLink"],[1,"history__list__trip__header"],[4,"ngIf"],[1,"history__list__trip__header__price"],[1,"history__list__trip__locations"],[1,"history__list__trip__locations__location","history__list__trip__locations__location--start"],[1,"history__list__trip__locations__location__time"],[1,"history__list__trip__locations__location__address"],[1,"history__list__trip__locations__location","history__list__trip__locations__location--end"],[1,"history__list__trip__locations__distance"]],template:function(t,i){if(1&t){var n=a.EpF();a.TgZ(0,"ion-header",0),a.TgZ(1,"ion-toolbar",1),a.TgZ(2,"ion-title",2),a._uU(3,"Trip History"),a.qZA(),a.TgZ(4,"ion-buttons",3),a.TgZ(5,"ion-button",4),a.NdJ("click",function(){return a.CHM(n),a.MAs(7).open()}),a.TgZ(6,"ion-datetime",5,6),a.NdJ("ngModelChange",function(t){return i.selectedDate=t}),a.qZA(),a._UZ(8,"ion-icon",7),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(9,"ion-content",8),a.YNc(10,l,2,0,"div",9),a.YNc(11,y,5,2,"div",10),a.qZA()}2&t&&(a.xp6(6),a.Q6J("ngModel",i.selectedDate)("pickerOptions",i.datePickerOptions),a.xp6(4),a.Q6J("ngIf",i.loading),a.xp6(1),a.Q6J("ngForOf",i.displayedTripDates))},directives:[r.Gu,r.sr,r.wd,r.Sm,r.YG,r.x4,r.QI,_.JJ,_.On,r.gu,r.W2,o.O5,o.sg,r.PQ,r.YI,e.rH],pipes:[o.JJ],styles:['.trip-history-header[_ngcontent-%COMP%]{background-color:#f6f7eb}.trip-history-header[_ngcontent-%COMP%]   .trip-history-header__date[_ngcontent-%COMP%]   ion-datetime[_ngcontent-%COMP%]{pointer-events:none;line-height:18px;margin-right:10px}.history[_ngcontent-%COMP%]{--padding-top:20px;--background:#f6f7eb}.history[_ngcontent-%COMP%]   .history__loading[_ngcontent-%COMP%]{text-align:center;margin-top:40px;margin-bottom:60px}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]{padding-left:8px;padding-right:8px}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__header[_ngcontent-%COMP%]{font-size:20px;line-height:25px;font-weight:600;letter-spacing:-.02em;color:#23232333;position:relative;padding-bottom:10px;margin-top:0}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:#f6f7eb;padding-left:8px;padding-right:8px;position:relative;z-index:1}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__header[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;top:10px;opacity:.2;border-bottom:2px dashed #232323;width:100%;height:2px}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__trip[_ngcontent-%COMP%]{box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;background-color:#fff;border-radius:16px;padding:16px;margin-bottom:15px}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__trip[_ngcontent-%COMP%]   .history__list__trip__header[_ngcontent-%COMP%]{border-bottom:1px solid #2323231f;position:relative;padding-bottom:13px;margin-bottom:15px}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__trip[_ngcontent-%COMP%]   .history__list__trip__header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-weight:600;font-size:20px;line-height:25px;letter-spacing:-.02em;color:#232323;padding-right:60px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;position:relative}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__trip[_ngcontent-%COMP%]   .history__list__trip__header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__trip[_ngcontent-%COMP%]   .history__list__trip__header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:afteR{content:"";position:absolute;right:-15px;top:0;background-color:#ff7a00;width:10px;height:10px;border-radius:5px}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__trip[_ngcontent-%COMP%]   .history__list__trip__header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-weight:500;font-size:16px;line-height:20px;letter-spacing:-.02em;color:#23232366}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__trip[_ngcontent-%COMP%]   .history__list__trip__header[_ngcontent-%COMP%]   .history__list__trip__header__price[_ngcontent-%COMP%]{position:absolute;top:0;right:0;text-align:center;padding:8px;background:#ff7a0014;border-radius:16px;font-weight:600;font-size:18px;line-height:22px;text-align:right;letter-spacing:-.02em;color:#ff7a00}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__trip[_ngcontent-%COMP%]   .history__list__trip__locations[_ngcontent-%COMP%]{position:relative}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__trip[_ngcontent-%COMP%]   .history__list__trip__locations[_ngcontent-%COMP%]   .history__list__trip__locations__location[_ngcontent-%COMP%]{display:flex;padding-right:50px}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__trip[_ngcontent-%COMP%]   .history__list__trip__locations[_ngcontent-%COMP%]   .history__list__trip__locations__location[_ngcontent-%COMP%]   .history__list__trip__locations__location__time[_ngcontent-%COMP%]{color:#23232399;position:relative}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__trip[_ngcontent-%COMP%]   .history__list__trip__locations[_ngcontent-%COMP%]   .history__list__trip__locations__location[_ngcontent-%COMP%]   .history__list__trip__locations__location__address[_ngcontent-%COMP%]{color:#23232399}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__trip[_ngcontent-%COMP%]   .history__list__trip__locations[_ngcontent-%COMP%]   .history__list__trip__locations__location.history__list__trip__locations__location--start[_ngcontent-%COMP%]   .history__list__trip__locations__location__time[_ngcontent-%COMP%]:after{content:"A";color:#ff7a00;background:#ff7a001f;padding:0 5px;border-radius:3px;margin-right:5px;margin-left:5px}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__trip[_ngcontent-%COMP%]   .history__list__trip__locations[_ngcontent-%COMP%]   .history__list__trip__locations__location.history__list__trip__locations__location--start[_ngcontent-%COMP%]   .history__list__trip__locations__location__time[_ngcontent-%COMP%]:before{content:"";position:absolute;right:15px;top:30px;border-right:1px solid #2323231f;height:30px;width:1px}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__trip[_ngcontent-%COMP%]   .history__list__trip__locations[_ngcontent-%COMP%]   .history__list__trip__locations__location.history__list__trip__locations__location--end[_ngcontent-%COMP%]{margin-top:15px}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__trip[_ngcontent-%COMP%]   .history__list__trip__locations[_ngcontent-%COMP%]   .history__list__trip__locations__location.history__list__trip__locations__location--end[_ngcontent-%COMP%]   .history__list__trip__locations__location__time[_ngcontent-%COMP%]:after{content:"B";color:#ff7a00;background:#ff7a001f;padding:0 5px;border-radius:3px;margin-right:5px;margin-left:5px}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__trip[_ngcontent-%COMP%]   .history__list__trip__locations[_ngcontent-%COMP%]   .history__list__trip__locations__distance[_ngcontent-%COMP%]{background:#2323230a;border-radius:16px;font-weight:600;font-size:18px;line-height:22px;letter-spacing:-.02em;color:#232323;position:absolute;top:0;right:0;text-align:center;padding:8px}.history[_ngcontent-%COMP%]   .history__list[_ngcontent-%COMP%]   .history__list__trip[_ngcontent-%COMP%]   .history__list__trip__locations[_ngcontent-%COMP%]   .history__list__trip__locations__distance[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;font-size:14px;line-height:17px;letter-spacing:-.02em;color:#232323;opacity:.4;display:block}']}),t}()}],O=function(){function t(){}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[e.Bz.forChild(M)],e.Bz]}),t}(),u=function(){function t(){}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[o.ez,_.u5,r.Pc,O]]}),t}()}}]);