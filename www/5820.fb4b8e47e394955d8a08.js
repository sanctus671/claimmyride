(self.webpackChunkclaimmyride=self.webpackChunkclaimmyride||[]).push([[5820],{5820:function(e,n,t){"use strict";t.r(n),t.d(n,{SettingsPageModule:function(){return _}});var o=t(1116),i=t(1462),r=t(8809),a=t(578),c=t(5803),s=t(303),u=t(9899);function l(e,n){1&e&&(c.TgZ(0,"ion-label"),c._uU(1,"Upgrade To Premium"),c.qZA())}function h(e,n){1&e&&(c.TgZ(0,"ion-label"),c._uU(1,"Premium Purchased"),c.qZA())}var d=function(){return["/manage-drivers"]},g=function(){return["/manage-vehicles"]},p=function(){return["/manage-trip-categories"]},m=function(){return["/tax-settings"]},f=function(){return["/upgrade"]},Z=[{path:"",component:function(){function e(e,n,t,o,i,r){var a=this;this.plt=e,this.authenticationService=n,this.alertCtrl=t,this.iab=o,this.modalController=i,this.loadingController=r,this.user={},this.authenticationService.getUserData().subscribe(function(e){a.user=e})}return e.prototype.ngOnInit=function(){},e.prototype.ionViewDidEnter=function(){},e.prototype.syncXero=function(){this.loadingController.create({message:"Connecting to Xero. Please wait...",duration:2e4}).then(function(e){e.present()})},e.prototype.openAbout=function(){this.iab.create("https://www.claimmyride.nz/","_system")},e.prototype.openRate=function(){this.plt.is("ios")?this.iab.create("https://itunes.apple.com/","_system"):this.iab.create("https://play.google.com/store/apps/details?id=com.claimmyridenz.app","_system")},e.prototype.openFollow=function(){this.iab.create("https://www.facebook.com/ClaimMyRide/","_system")},e.prototype.openEmail=function(){this.iab.create("mailto:admin@claimmyride.nz","_system")},e.prototype.openChangeUnits=function(){var e=this;this.alertCtrl.create({header:"Change Units",inputs:[{name:"units",type:"radio",label:"Kilometre",value:"km",checked:!this.user.units||"km"===this.user.units},{name:"units",type:"radio",label:"Miles",value:"miles",checked:!(!this.user.units||"miles"!==this.user.units)}],buttons:[{text:"Cancel",role:"cancel",handler:function(e){}},{text:"Change",handler:function(n){n&&(e.user.units=n,e.authenticationService.updateUser({units:n}).then(function(){}))}}]}).then(function(e){e.present()})},e.prototype.deleteAccount=function(){var e=this;this.alertCtrl.create({header:"WARNING: You are about to delete your account",message:"All your data associated with this account will be erased. This cannot be undone.",buttons:[{text:"Cancel",role:"cancel",handler:function(e){}},{text:"Delete",handler:function(n){e.authenticationService.deleteUser().then(function(){e.alertCtrl.create({header:"Account deleted",message:"Your account has been removed",buttons:[{text:"Dismiss",role:"cancel",handler:function(e){}}]}).then(function(e){e.present()}),e.logout()}).catch(function(){e.alertCtrl.create({header:"Error",message:"There was an error while deleting your account.",buttons:[{text:"Cancel",role:"cancel",handler:function(e){}},{text:"Try Again",handler:function(n){setTimeout(function(){e.deleteAccount()},200)}}]}).then(function(e){e.present()})})}}]}).then(function(e){e.present()})},e.prototype.openChangeEmail=function(){var e=this;this.alertCtrl.create({header:"Change Email",inputs:[{name:"email",placeholder:"Email",type:"text",value:this.user.email}],buttons:[{text:"Cancel",role:"cancel",handler:function(e){}},{text:"Change",handler:function(n){n.email&&e.authenticationService.changeEmail(e.user.email).then(function(){e.alertCtrl.create({header:"Success",message:"Your email has been updated",buttons:[{text:"Dismiss",role:"cancel",handler:function(e){}}]}).then(function(e){e.present()})}).catch(function(){e.alertCtrl.create({header:"Error",message:"There was an error while changing your email.",buttons:[{text:"Cancel",role:"cancel",handler:function(e){}},{text:"Try Again",handler:function(n){setTimeout(function(){e.openChangeEmail()},200)}}]}).then(function(e){e.present()})})}}]}).then(function(e){e.present()})},e.prototype.openChangePassword=function(){var e=this;this.alertCtrl.create({header:"Change Password",inputs:[{name:"password",placeholder:"Password",type:"password"},{name:"confirmPassword",placeholder:"Confirm Password",type:"password"}],buttons:[{text:"Cancel",role:"cancel",handler:function(e){}},{text:"Change",handler:function(n){n.password&&n.confirmPassword&&n.password===n.confirmPassword?e.authenticationService.changePassword(e.user.email,n.password,n.confirmPassword).then(function(){e.alertCtrl.create({header:"Success",message:"Your password has been updated",buttons:[{text:"Dismiss",role:"cancel",handler:function(e){}}]}).then(function(e){e.present()})}).catch(function(){e.alertCtrl.create({header:"Error",message:"There was an error while changing your password.",buttons:[{text:"Cancel",role:"cancel",handler:function(e){}},{text:"Try Again",handler:function(n){setTimeout(function(){e.openChangePassword()},200)}}]}).then(function(e){e.present()})}):e.alertCtrl.create({header:"Error",message:"Passwords do not match",buttons:[{text:"Cancel",role:"cancel",handler:function(e){}},{text:"Try Again",handler:function(n){setTimeout(function(){e.openChangePassword()},200)}}]}).then(function(e){e.present()})}}]}).then(function(e){e.present()})},e.prototype.logout=function(){this.authenticationService.logout()},e.\u0275fac=function(n){return new(n||e)(c.Y36(r.t4),c.Y36(s.$),c.Y36(r.Br),c.Y36(u.i),c.Y36(r.IN),c.Y36(r.HT))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-settings"]],decls:59,vars:13,consts:[[1,"settings-header"],["color","light"],["color","primary"],[1,"settings"],["routerDirection","forward","mode","md","detail","false",3,"routerLink"],["name","chevron-forward-outline","slot","end","color","primary"],[1,"settings__header"],["routerDirection","forward","mode","md","detail","false",3,"routerLink","disabled"],[4,"ngIf"],["mode","md","detail","false",3,"click"],["color","danger"],["name","chevron-forward-outline","slot","end","color","danger"]],template:function(e,n){1&e&&(c.TgZ(0,"ion-header",0),c.TgZ(1,"ion-toolbar",1),c.TgZ(2,"ion-title",2),c._uU(3,"Settings"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(4,"ion-content",3),c.TgZ(5,"ion-list"),c.TgZ(6,"ion-list-header"),c._uU(7,"Tracking"),c.qZA(),c.TgZ(8,"ion-item",4),c.TgZ(9,"ion-label"),c._uU(10,"Manage Drivers"),c.qZA(),c._UZ(11,"ion-icon",5),c.qZA(),c.TgZ(12,"ion-item",4),c.TgZ(13,"ion-label"),c._uU(14,"Manage Vehicles"),c.qZA(),c._UZ(15,"ion-icon",5),c.qZA(),c.TgZ(16,"ion-item",4),c.TgZ(17,"ion-label"),c._uU(18,"Manage Trip Categories"),c.qZA(),c._UZ(19,"ion-icon",5),c.qZA(),c.TgZ(20,"ion-item",4),c.TgZ(21,"ion-label"),c._uU(22,"KM Expense Claim Rates"),c.qZA(),c._UZ(23,"ion-icon",5),c.qZA(),c.TgZ(24,"ion-list-header",6),c._uU(25,"Account"),c.qZA(),c.TgZ(26,"ion-item",7),c.YNc(27,l,2,0,"ion-label",8),c.YNc(28,h,2,0,"ion-label",8),c._UZ(29,"ion-icon",5),c.qZA(),c.TgZ(30,"ion-item",9),c.NdJ("click",function(){return n.openChangeEmail()}),c.TgZ(31,"ion-label"),c._uU(32,"Change Email"),c.qZA(),c._UZ(33,"ion-icon",5),c.qZA(),c.TgZ(34,"ion-item",9),c.NdJ("click",function(){return n.openChangePassword()}),c.TgZ(35,"ion-label"),c._uU(36,"Change Password"),c.qZA(),c._UZ(37,"ion-icon",5),c.qZA(),c.TgZ(38,"ion-item",9),c.NdJ("click",function(){return n.logout()}),c._uU(39," Logout "),c._UZ(40,"ion-icon",5),c.qZA(),c.TgZ(41,"ion-item",9),c.NdJ("click",function(){return n.deleteAccount()}),c.TgZ(42,"ion-label",10),c._uU(43,"Delete Account"),c.qZA(),c._UZ(44,"ion-icon",11),c.qZA(),c.TgZ(45,"ion-list-header",6),c._uU(46,"Support"),c.qZA(),c.TgZ(47,"ion-item",9),c.NdJ("click",function(){return n.openAbout()}),c._uU(48," About Claim My Ride "),c._UZ(49,"ion-icon",5),c.qZA(),c.TgZ(50,"ion-item",9),c.NdJ("click",function(){return n.openRate()}),c._uU(51," Rate The App "),c._UZ(52,"ion-icon",5),c.qZA(),c.TgZ(53,"ion-item",9),c.NdJ("click",function(){return n.openFollow()}),c._uU(54," Follow Us "),c._UZ(55,"ion-icon",5),c.qZA(),c.TgZ(56,"ion-item",9),c.NdJ("click",function(){return n.openEmail()}),c._uU(57," Contact Support "),c._UZ(58,"ion-icon",5),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(8),c.Q6J("routerLink",c.DdM(8,d)),c.xp6(4),c.Q6J("routerLink",c.DdM(9,g)),c.xp6(4),c.Q6J("routerLink",c.DdM(10,p)),c.xp6(4),c.Q6J("routerLink",c.DdM(11,m)),c.xp6(6),c.Q6J("routerLink",c.DdM(12,f))("disabled",n.user.premium_purchased),c.xp6(1),c.Q6J("ngIf",!n.user.premium_enabled),c.xp6(1),c.Q6J("ngIf",n.user.premium_enabled))},directives:[r.Gu,r.sr,r.wd,r.W2,r.q_,r.yh,r.Ie,r.YI,a.rH,r.Q$,r.gu,o.O5],styles:[".settings-header[_ngcontent-%COMP%]{background-color:#f6f7eb}.settings[_ngcontent-%COMP%], .settings[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{--background:#f6f7eb}.settings[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{background:#f6f7eb}.settings[_ngcontent-%COMP%]   ion-list.ios[_ngcontent-%COMP%]{margin-top:15px}.settings[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{--background:#f6f7eb;color:#23232366}.settings[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-list-header.ios[_ngcontent-%COMP%]{font-size:14px;font-weight:400;min-height:45px;line-height:45px}.settings[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   .settings__header[_ngcontent-%COMP%]{margin-top:10px}"]}),e}()}],C=function(){function e(){}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[a.Bz.forChild(Z)],a.Bz]}),e}(),_=function(){function e(){}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[o.ez,i.u5,r.Pc,C]]}),e}()}}]);